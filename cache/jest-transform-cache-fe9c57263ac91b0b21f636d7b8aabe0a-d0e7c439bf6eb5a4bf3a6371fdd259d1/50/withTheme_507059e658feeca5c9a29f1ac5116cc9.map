{"version":3,"sources":["withTheme.js"],"names":["isClassComponent","Component","Boolean","prototype","isReactComponent","withTheme","WrappedComponent","themeKey","ThemedComponent","props","forwardedRef","children","rest","context","theme","DefaultTheme","updateTheme","replaceTheme","React","name","displayName","forwardRef","ref"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AACA;;;;;;AAEA,IAAMA,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,SAAS;AAAA,SAChCC,OAAO,CAACD,SAAS,CAACE,SAAV,IAAuBF,SAAS,CAACE,SAAV,CAAoBC,gBAA5C,CADyB;AAAA,CAAlC;;AAGA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,gBAAD,EAAmBC,QAAnB,EAAgC;AAAA,MAC1CC,eAD0C;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,+BAErC;AAAA,0BACqC,KAAKC,KAD1C;AAAA,YACCC,YADD,eACCA,YADD;AAAA,YACeC,QADf,eACeA,QADf;AAAA,YAC4BC,IAD5B;AAGP,eACE,6BAAC,4BAAD,QACG,UAAAC,OAAO,EAAI;AAEV,cAAI,CAACA,OAAL,EAAc;AACZ,gBAAMJ,MAAK,qBAAQG,IAAR;AAAcE,cAAAA,KAAK,EAAEC,cAArB;AAAmCJ,cAAAA,QAAQ,EAARA;AAAnC,cAAX;;AAEA,mBAAOX,gBAAgB,CAACM,gBAAD,CAAhB,GACL,6BAAC,gBAAD;AAAkB,cAAA,GAAG,EAAEI;AAAvB,eAAyCD,MAAzC,EADK,GAGL,6BAAC,gBAAD,EAAsBA,MAAtB,CAHF;AAKD;;AAVS,cAYFK,KAZE,GAYmCD,OAZnC,CAYFC,KAZE;AAAA,cAYKE,WAZL,GAYmCH,OAZnC,CAYKG,WAZL;AAAA,cAYkBC,YAZlB,GAYmCJ,OAZnC,CAYkBI,YAZlB;;AAaV,cAAMR,KAAK;AACTK,YAAAA,KAAK,EAALA,KADS;AAETE,YAAAA,WAAW,EAAXA,WAFS;AAGTC,YAAAA,YAAY,EAAZA;AAHS,aAIN,wBAAWV,QAAQ,IAAIO,KAAK,CAACP,QAAD,CAAlB,IAAiC,EAA3C,EAA+CK,IAA/C,CAJM;AAKTD,YAAAA,QAAQ,EAARA;AALS,YAAX;;AAQA,cAAIX,gBAAgB,CAACM,gBAAD,CAApB,EAAwC;AACtC,mBAAO,6BAAC,gBAAD;AAAkB,cAAA,GAAG,EAAEI;AAAvB,eAAyCD,KAAzC,EAAP;AACD;;AACD,iBAAO,6BAAC,gBAAD,EAAsBA,KAAtB,CAAP;AACD,SA1BH,CADF;AA8BD;AAnC6C;AAAA;AAAA,IAClBS,eAAMjB,SADY;;AAsChD,MAAMkB,IAAI,GAAGZ,QAAQ,eACPA,QADO,gBAEPD,gBAAgB,CAACc,WAAjB,IACRd,gBAAgB,CAACa,IADT,IAER,WAJe,CAArB;;AAMA,MAAInB,gBAAgB,CAACM,gBAAD,CAApB,EAAwC;AACtC,QAAMe,UAAU,GAAG,SAAbA,UAAa,CAACZ,KAAD,EAAQa,GAAR;AAAA,aACjB,6BAAC,eAAD,6BAAqBb,KAArB;AAA4B,QAAA,YAAY,EAAEa;AAA1C,SADiB;AAAA,KAAnB;;AAIAD,IAAAA,UAAU,CAACD,WAAX,GAAyBD,IAAzB;AACA,WAAO,mCAAqBD,eAAMG,UAAN,CAAiBA,UAAjB,CAArB,EAAmDf,gBAAnD,CAAP;AACD;;AAEDE,EAAAA,eAAe,CAACY,WAAhB,GAA8BD,IAA9B;AACA,SAAOX,eAAP;AACD,CAvDD;;eAyDeH,S","sourcesContent":["import React from 'react';\nimport deepmerge from 'deepmerge';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\n\nimport { ThemeConsumer } from './ThemeProvider';\nimport DefaultTheme from './theme';\n\nconst isClassComponent = Component =>\n  Boolean(Component.prototype && Component.prototype.isReactComponent);\n\nconst withTheme = (WrappedComponent, themeKey) => {\n  class ThemedComponent extends React.Component {\n    render() {\n      const { forwardedRef, children, ...rest } = this.props;\n\n      return (\n        <ThemeConsumer>\n          {context => {\n            // If user isn't using ThemeProvider\n            if (!context) {\n              const props = { ...rest, theme: DefaultTheme, children };\n\n              return isClassComponent(WrappedComponent) ? (\n                <WrappedComponent ref={forwardedRef} {...props} />\n              ) : (\n                <WrappedComponent {...props} />\n              );\n            }\n\n            const { theme, updateTheme, replaceTheme } = context;\n            const props = {\n              theme,\n              updateTheme,\n              replaceTheme,\n              ...deepmerge((themeKey && theme[themeKey]) || {}, rest),\n              children,\n            };\n\n            if (isClassComponent(WrappedComponent)) {\n              return <WrappedComponent ref={forwardedRef} {...props} />;\n            }\n            return <WrappedComponent {...props} />;\n          }}\n        </ThemeConsumer>\n      );\n    }\n  }\n\n  const name = themeKey\n    ? `Themed.${themeKey}`\n    : `Themed.${WrappedComponent.displayName ||\n        WrappedComponent.name ||\n        'Component'}`;\n\n  if (isClassComponent(WrappedComponent)) {\n    const forwardRef = (props, ref) => (\n      <ThemedComponent {...props} forwardedRef={ref} />\n    );\n\n    forwardRef.displayName = name;\n    return hoistNonReactStatics(React.forwardRef(forwardRef), WrappedComponent);\n  }\n\n  ThemedComponent.displayName = name;\n  return ThemedComponent;\n};\n\nexport default withTheme;\n"]}