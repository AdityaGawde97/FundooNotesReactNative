d9bbeb2e01af6460b76165985cd7ea53
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.ButtonGroup = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactNative = require("react-native");

var _config = require("../config");

var _helpers = require("../helpers");

var _Text = _interopRequireDefault(require("../text/Text"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var ButtonGroup = function ButtonGroup(props) {
  var theme = props.theme,
      rest = (0, _objectWithoutProperties2.default)(props, ["theme"]);
  var Component = rest.Component,
      buttons = rest.buttons,
      _onPress = rest.onPress,
      selectedIndex = rest.selectedIndex,
      selectedIndexes = rest.selectedIndexes,
      selectMultiple = rest.selectMultiple,
      containerStyle = rest.containerStyle,
      innerBorderStyle = rest.innerBorderStyle,
      lastBorderStyle = rest.lastBorderStyle,
      buttonStyle = rest.buttonStyle,
      textStyle = rest.textStyle,
      selectedTextStyle = rest.selectedTextStyle,
      selectedButtonStyle = rest.selectedButtonStyle,
      _rest$underlayColor = rest.underlayColor,
      underlayColor = _rest$underlayColor === void 0 ? theme.colors.primary : _rest$underlayColor,
      activeOpacity = rest.activeOpacity,
      onHideUnderlay = rest.onHideUnderlay,
      onShowUnderlay = rest.onShowUnderlay,
      setOpacityTo = rest.setOpacityTo,
      containerBorderRadius = rest.containerBorderRadius,
      disabled = rest.disabled,
      disabledStyle = rest.disabledStyle,
      disabledTextStyle = rest.disabledTextStyle,
      disabledSelectedStyle = rest.disabledSelectedStyle,
      disabledSelectedTextStyle = rest.disabledSelectedTextStyle,
      attributes = (0, _objectWithoutProperties2.default)(rest, ["Component", "buttons", "onPress", "selectedIndex", "selectedIndexes", "selectMultiple", "containerStyle", "innerBorderStyle", "lastBorderStyle", "buttonStyle", "textStyle", "selectedTextStyle", "selectedButtonStyle", "underlayColor", "activeOpacity", "onHideUnderlay", "onShowUnderlay", "setOpacityTo", "containerBorderRadius", "disabled", "disabledStyle", "disabledTextStyle", "disabledSelectedStyle", "disabledSelectedTextStyle"]);
  var innerBorderWidth = 1;

  if (innerBorderStyle && Object.prototype.hasOwnProperty.call(innerBorderStyle, 'width')) {
    innerBorderWidth = innerBorderStyle.width;
  }

  return _react.default.createElement(_reactNative.View, (0, _extends2.default)({}, attributes, {
    style: _reactNative.StyleSheet.flatten([styles.container, containerStyle && containerStyle])
  }), buttons.map(function (button, i) {
    var isSelected = selectedIndex === i || selectedIndexes.includes(i);
    var isDisabled = disabled === true || Array.isArray(disabled) && disabled.includes(i);
    return _react.default.createElement(_reactNative.View, {
      key: i,
      style: _reactNative.StyleSheet.flatten([styles.button, i < buttons.length - 1 && {
        borderRightWidth: i === 0 ? 0 : innerBorderWidth,
        borderRightColor: innerBorderStyle && innerBorderStyle.color || theme.colors.grey4
      }, i === 1 && {
        borderLeftWidth: innerBorderWidth,
        borderLeftColor: innerBorderStyle && innerBorderStyle.color || theme.colors.grey4
      }, i === buttons.length - 1 && _objectSpread({}, lastBorderStyle, {
        borderTopRightRadius: containerBorderRadius,
        borderBottomRightRadius: containerBorderRadius
      }), i === 0 && {
        borderTopLeftRadius: containerBorderRadius,
        borderBottomLeftRadius: containerBorderRadius
      }])
    }, _react.default.createElement(Component, {
      testID: "buttonGroupItem",
      activeOpacity: activeOpacity,
      setOpacityTo: setOpacityTo,
      onHideUnderlay: onHideUnderlay,
      onShowUnderlay: onShowUnderlay,
      underlayColor: underlayColor,
      disabled: isDisabled,
      onPress: function onPress() {
        if (selectMultiple) {
          if (selectedIndexes.includes(i)) {
            _onPress(selectedIndexes.filter(function (index) {
              return index !== i;
            }));
          } else {
            _onPress([].concat((0, _toConsumableArray2.default)(selectedIndexes), [i]));
          }
        } else {
          _onPress(i);
        }
      },
      style: styles.button
    }, _react.default.createElement(_reactNative.View, {
      style: _reactNative.StyleSheet.flatten([styles.textContainer, buttonStyle && buttonStyle, isSelected && {
        backgroundColor: theme.colors.primary
      }, isSelected && selectedButtonStyle && selectedButtonStyle, isDisabled && styles.disabled, isDisabled && disabledStyle, isDisabled && isSelected && styles.disabledSelected(theme), isDisabled && isSelected && disabledSelectedStyle])
    }, button.element ? _react.default.createElement(button.element, null) : _react.default.createElement(_Text.default, {
      testID: "buttonGroupItemText",
      style: _reactNative.StyleSheet.flatten([styles.buttonText(theme), textStyle && textStyle, isSelected && {
        color: '#fff'
      }, isSelected && selectedTextStyle, isDisabled && styles.disabledText(theme), isDisabled && disabledTextStyle, isDisabled && isSelected && disabledSelectedTextStyle])
    }, button))));
  }));
};

exports.ButtonGroup = ButtonGroup;
var styles = {
  button: {
    flex: 1
  },
  textContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center'
  },
  container: {
    marginLeft: 10,
    marginRight: 10,
    marginBottom: 5,
    marginTop: 5,
    borderColor: '#e3e3e3',
    borderWidth: 1,
    flexDirection: 'row',
    borderRadius: 3,
    overflow: 'hidden',
    backgroundColor: '#fff',
    height: 40
  },
  buttonText: function buttonText(theme) {
    return _objectSpread({
      fontSize: (0, _helpers.normalizeText)(13),
      color: theme.colors.grey2
    }, _reactNative.Platform.select({
      android: {},
      default: {
        fontWeight: '500'
      }
    }));
  },
  disabled: {
    backgroundColor: 'transparent'
  },
  disabledText: function disabledText(theme) {
    return {
      color: (0, _helpers.color)(theme.colors.disabled).darken(0.3).toString()
    };
  },
  disabledSelected: function disabledSelected(theme) {
    return {
      backgroundColor: theme.colors.disabled
    };
  }
};
ButtonGroup.propTypes = {
  button: _propTypes.default.object,
  Component: _propTypes.default.elementType,
  onPress: _propTypes.default.func,
  buttons: _propTypes.default.array,
  containerStyle: _config.ViewPropTypes.style,
  textStyle: _reactNative.Text.propTypes.style,
  selectedTextStyle: _reactNative.Text.propTypes.style,
  selectedButtonStyle: _config.ViewPropTypes.style,
  underlayColor: _propTypes.default.string,
  selectedIndex: _propTypes.default.number,
  selectedIndexes: _propTypes.default.arrayOf(_propTypes.default.number),
  activeOpacity: _propTypes.default.number,
  onHideUnderlay: _propTypes.default.func,
  onShowUnderlay: _propTypes.default.func,
  setOpacityTo: _propTypes.default.func,
  innerBorderStyle: _propTypes.default.shape({
    color: _propTypes.default.string,
    width: _propTypes.default.number
  }),
  lastBorderStyle: _propTypes.default.oneOfType([_config.ViewPropTypes.style, _reactNative.Text.propTypes.style]),
  buttonStyle: _config.ViewPropTypes.style,
  containerBorderRadius: _propTypes.default.number,
  selectMultiple: _propTypes.default.bool,
  theme: _propTypes.default.object,
  disabled: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.arrayOf(_propTypes.default.number)]),
  disabledStyle: _config.ViewPropTypes.style,
  disabledTextStyle: _reactNative.Text.propTypes.style,
  disabledSelectedStyle: _config.ViewPropTypes.style,
  disabledSelectedTextStyle: _reactNative.Text.propTypes.style
};
ButtonGroup.defaultProps = {
  selectedIndex: null,
  selectedIndexes: [],
  selectMultiple: false,
  containerBorderRadius: 3,
  disabled: false,
  Component: _reactNative.Platform.select({
    android: _reactNative.TouchableNativeFeedback,
    default: _reactNative.TouchableOpacity
  }),
  onPress: function onPress() {
    return null;
  }
};

var _default = (0, _config.withTheme)(ButtonGroup, 'ButtonGroup');

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkJ1dHRvbkdyb3VwLmpzIl0sIm5hbWVzIjpbIkJ1dHRvbkdyb3VwIiwicHJvcHMiLCJ0aGVtZSIsInJlc3QiLCJDb21wb25lbnQiLCJidXR0b25zIiwib25QcmVzcyIsInNlbGVjdGVkSW5kZXgiLCJzZWxlY3RlZEluZGV4ZXMiLCJzZWxlY3RNdWx0aXBsZSIsImNvbnRhaW5lclN0eWxlIiwiaW5uZXJCb3JkZXJTdHlsZSIsImxhc3RCb3JkZXJTdHlsZSIsImJ1dHRvblN0eWxlIiwidGV4dFN0eWxlIiwic2VsZWN0ZWRUZXh0U3R5bGUiLCJzZWxlY3RlZEJ1dHRvblN0eWxlIiwidW5kZXJsYXlDb2xvciIsImNvbG9ycyIsInByaW1hcnkiLCJhY3RpdmVPcGFjaXR5Iiwib25IaWRlVW5kZXJsYXkiLCJvblNob3dVbmRlcmxheSIsInNldE9wYWNpdHlUbyIsImNvbnRhaW5lckJvcmRlclJhZGl1cyIsImRpc2FibGVkIiwiZGlzYWJsZWRTdHlsZSIsImRpc2FibGVkVGV4dFN0eWxlIiwiZGlzYWJsZWRTZWxlY3RlZFN0eWxlIiwiZGlzYWJsZWRTZWxlY3RlZFRleHRTdHlsZSIsImF0dHJpYnV0ZXMiLCJpbm5lckJvcmRlcldpZHRoIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwid2lkdGgiLCJTdHlsZVNoZWV0IiwiZmxhdHRlbiIsInN0eWxlcyIsImNvbnRhaW5lciIsIm1hcCIsImJ1dHRvbiIsImkiLCJpc1NlbGVjdGVkIiwiaW5jbHVkZXMiLCJpc0Rpc2FibGVkIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiYm9yZGVyUmlnaHRXaWR0aCIsImJvcmRlclJpZ2h0Q29sb3IiLCJjb2xvciIsImdyZXk0IiwiYm9yZGVyTGVmdFdpZHRoIiwiYm9yZGVyTGVmdENvbG9yIiwiYm9yZGVyVG9wUmlnaHRSYWRpdXMiLCJib3JkZXJCb3R0b21SaWdodFJhZGl1cyIsImJvcmRlclRvcExlZnRSYWRpdXMiLCJib3JkZXJCb3R0b21MZWZ0UmFkaXVzIiwiZmlsdGVyIiwiaW5kZXgiLCJ0ZXh0Q29udGFpbmVyIiwiYmFja2dyb3VuZENvbG9yIiwiZGlzYWJsZWRTZWxlY3RlZCIsImVsZW1lbnQiLCJidXR0b25UZXh0IiwiZGlzYWJsZWRUZXh0IiwiZmxleCIsImp1c3RpZnlDb250ZW50IiwiYWxpZ25JdGVtcyIsIm1hcmdpbkxlZnQiLCJtYXJnaW5SaWdodCIsIm1hcmdpbkJvdHRvbSIsIm1hcmdpblRvcCIsImJvcmRlckNvbG9yIiwiYm9yZGVyV2lkdGgiLCJmbGV4RGlyZWN0aW9uIiwiYm9yZGVyUmFkaXVzIiwib3ZlcmZsb3ciLCJoZWlnaHQiLCJmb250U2l6ZSIsImdyZXkyIiwiUGxhdGZvcm0iLCJzZWxlY3QiLCJhbmRyb2lkIiwiZGVmYXVsdCIsImZvbnRXZWlnaHQiLCJkYXJrZW4iLCJ0b1N0cmluZyIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsIm9iamVjdCIsImVsZW1lbnRUeXBlIiwiZnVuYyIsImFycmF5IiwiVmlld1Byb3BUeXBlcyIsInN0eWxlIiwiTmF0aXZlVGV4dCIsInN0cmluZyIsIm51bWJlciIsImFycmF5T2YiLCJzaGFwZSIsIm9uZU9mVHlwZSIsImJvb2wiLCJkZWZhdWx0UHJvcHMiLCJUb3VjaGFibGVOYXRpdmVGZWVkYmFjayIsIlRvdWNoYWJsZU9wYWNpdHkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQVNBOztBQUNBOztBQUVBOzs7Ozs7QUFFQSxJQUFNQSxXQUFXLEdBQUcsU0FBZEEsV0FBYyxDQUFBQyxLQUFLLEVBQUk7QUFBQSxNQUNuQkMsS0FEbUIsR0FDQUQsS0FEQSxDQUNuQkMsS0FEbUI7QUFBQSxNQUNUQyxJQURTLDBDQUNBRixLQURBO0FBQUEsTUFJekJHLFNBSnlCLEdBNkJ2QkQsSUE3QnVCLENBSXpCQyxTQUp5QjtBQUFBLE1BS3pCQyxPQUx5QixHQTZCdkJGLElBN0J1QixDQUt6QkUsT0FMeUI7QUFBQSxNQU16QkMsUUFOeUIsR0E2QnZC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dUUsa0JBQVdSLFNBQVgsQ0FBcUJPLEtBakNsQjtBQWtDdEJyRSxFQUFBQSxxQkFBcUIsRUFBRW9FLHNCQUFjQyxLQWxDZjtBQW1DdEJwRSxFQUFBQSx5QkFBeUIsRUFBRXFFLGtCQUFXUixTQUFYLENBQXFCTztBQW5DMUIsQ0FBeEI7QUFzQ0FqRyxXQUFXLENBQUN5RyxZQUFaLEdBQTJCO0FBQ3pCbEcsRUFBQUEsYUFBYSxFQUFFLElBRFU7QUFFekJDLEVBQUFBLGVBQWUsRUFBRSxFQUZRO0FBR3pCQyxFQUFBQSxjQUFjLEVBQUUsS0FIUztBQUl6QmUsRUFBQUEscUJBQXFCLEVBQUUsQ0FKRTtBQUt6QkMsRUFBQUEsUUFBUSxFQUFFLEtBTGU7QUFNekJyQixFQUFBQSxTQUFTLEVBQUUrRSxzQkFBU0MsTUFBVCxDQUFnQjtBQUN6QkMsSUFBQUEsT0FBTyxFQUFFcUIsb0NBRGdCO0FBRXpCcEIsSUFBQUEsT0FBTyxFQUFFcUI7QUFGZ0IsR0FBaEIsQ0FOYztBQVV6QnJHLEVBQUFBLE9BQU8sRUFBRTtBQUFBLFdBQU0sSUFBTjtBQUFBO0FBVmdCLENBQTNCOztlQWNlLHVCQUFVTixXQUFWLEVBQXVCLGFBQXZCLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7XG4gIFZpZXcsXG4gIFRleHQgYXMgTmF0aXZlVGV4dCxcbiAgVG91Y2hhYmxlTmF0aXZlRmVlZGJhY2ssXG4gIFRvdWNoYWJsZU9wYWNpdHksXG4gIFBsYXRmb3JtLFxuICBTdHlsZVNoZWV0LFxufSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuXG5pbXBvcnQgeyBWaWV3UHJvcFR5cGVzLCB3aXRoVGhlbWUgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IHsgbm9ybWFsaXplVGV4dCwgY29sb3IgfSBmcm9tICcuLi9oZWxwZXJzJztcblxuaW1wb3J0IFRleHQgZnJvbSAnLi4vdGV4dC9UZXh0JztcblxuY29uc3QgQnV0dG9uR3JvdXAgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHsgdGhlbWUsIC4uLnJlc3QgfSA9IHByb3BzO1xuXG4gIGNvbnN0IHtcbiAgICBDb21wb25lbnQsXG4gICAgYnV0dG9ucyxcbiAgICBvblByZXNzLFxuICAgIHNlbGVjdGVkSW5kZXgsXG4gICAgc2VsZWN0ZWRJbmRleGVzLFxuICAgIHNlbGVjdE11bHRpcGxlLFxuICAgIGNvbnRhaW5lclN0eWxlLFxuICAgIGlubmVyQm9yZGVyU3R5bGUsXG4gICAgbGFzdEJvcmRlclN0eWxlLFxuICAgIGJ1dHRvblN0eWxlLFxuICAgIHRleHRTdHlsZSxcbiAgICBzZWxlY3RlZFRleHRTdHlsZSxcbiAgICBzZWxlY3RlZEJ1dHRvblN0eWxlLFxuICAgIHVuZGVybGF5Q29sb3IgPSB0aGVtZS5jb2xvcnMucHJpbWFyeSxcbiAgICBhY3RpdmVPcGFjaXR5LFxuICAgIG9uSGlkZVVuZGVybGF5LFxuICAgIG9uU2hvd1VuZGVybGF5LFxuICAgIHNldE9wYWNpdHlUbyxcbiAgICBjb250YWluZXJCb3JkZXJSYWRpdXMsXG4gICAgZGlzYWJsZWQsXG4gICAgZGlzYWJsZWRTdHlsZSxcbiAgICBkaXNhYmxlZFRleHRTdHlsZSxcbiAgICBkaXNhYmxlZFNlbGVjdGVkU3R5bGUsXG4gICAgZGlzYWJsZWRTZWxlY3RlZFRleHRTdHlsZSxcbiAgICAuLi5hdHRyaWJ1dGVzXG4gIH0gPSByZXN0O1xuXG4gIGxldCBpbm5lckJvcmRlcldpZHRoID0gMTtcblxuICBpZiAoXG4gICAgaW5uZXJCb3JkZXJTdHlsZSAmJlxuICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbm5lckJvcmRlclN0eWxlLCAnd2lkdGgnKVxuICApIHtcbiAgICBpbm5lckJvcmRlcldpZHRoID0gaW5uZXJCb3JkZXJTdHlsZS53aWR0aDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPFZpZXdcbiAgICAgIHsuLi5hdHRyaWJ1dGVzfVxuICAgICAgc3R5bGU9e1N0eWxlU2hlZXQuZmxhdHRlbihbXG4gICAgICAgIHN0eWxlcy5jb250YWluZXIsXG4gICAgICAgIGNvbnRhaW5lclN0eWxlICYmIGNvbnRhaW5lclN0eWxlLFxuICAgICAgXSl9XG4gICAgPlxuICAgICAge2J1dHRvbnMubWFwKChidXR0b24sIGkpID0+IHtcbiAgICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IHNlbGVjdGVkSW5kZXggPT09IGkgfHwgc2VsZWN0ZWRJbmRleGVzLmluY2x1ZGVzKGkpO1xuICAgICAgICBjb25zdCBpc0Rpc2FibGVkID1cbiAgICAgICAgICBkaXNhYmxlZCA9PT0gdHJ1ZSB8fFxuICAgICAgICAgIChBcnJheS5pc0FycmF5KGRpc2FibGVkKSAmJiBkaXNhYmxlZC5pbmNsdWRlcyhpKSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgc3R5bGU9e1N0eWxlU2hlZXQuZmxhdHRlbihbXG4gICAgICAgICAgICAgIC8vIEZJWE1FOiBUaGlzIGlzIGEgd29ya2Fyb3VuZCB0byB0aGUgYm9yZGVyQ29sb3IgYW5kIGJvcmRlclJhZGl1cyBidWdcbiAgICAgICAgICAgICAgLy8gcmVhY3QtbmF0aXZlIHJlZjogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LW5hdGl2ZS9pc3N1ZXMvODIzNlxuICAgICAgICAgICAgICBzdHlsZXMuYnV0dG9uLFxuICAgICAgICAgICAgICBpIDwgYnV0dG9ucy5sZW5ndGggLSAxICYmIHtcbiAgICAgICAgICAgICAgICBib3JkZXJSaWdodFdpZHRoOiBpID09PSAwID8gMCA6IGlubmVyQm9yZGVyV2lkdGgsXG4gICAgICAgICAgICAgICAgYm9yZGVyUmlnaHRDb2xvcjpcbiAgICAgICAgICAgICAgICAgIChpbm5lckJvcmRlclN0eWxlICYmIGlubmVyQm9yZGVyU3R5bGUuY29sb3IpIHx8XG4gICAgICAgICAgICAgICAgICB0aGVtZS5jb2xvcnMuZ3JleTQsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGkgPT09IDEgJiYge1xuICAgICAgICAgICAgICAgIGJvcmRlckxlZnRXaWR0aDogaW5uZXJCb3JkZXJXaWR0aCxcbiAgICAgICAgICAgICAgICBib3JkZXJMZWZ0Q29sb3I6XG4gICAgICAgICAgICAgICAgICAoaW5uZXJCb3JkZXJTdHlsZSAmJiBpbm5lckJvcmRlclN0eWxlLmNvbG9yKSB8fFxuICAgICAgICAgICAgICAgICAgdGhlbWUuY29sb3JzLmdyZXk0LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBpID09PSBidXR0b25zLmxlbmd0aCAtIDEgJiYge1xuICAgICAgICAgICAgICAgIC4uLmxhc3RCb3JkZXJTdHlsZSxcbiAgICAgICAgICAgICAgICBib3JkZXJUb3BSaWdodFJhZGl1czogY29udGFpbmVyQm9yZGVyUmFkaXVzLFxuICAgICAgICAgICAgICAgIGJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzOiBjb250YWluZXJCb3JkZXJSYWRpdXMsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGkgPT09IDAgJiYge1xuICAgICAgICAgICAgICAgIGJvcmRlclRvcExlZnRSYWRpdXM6IGNvbnRhaW5lckJvcmRlclJhZGl1cyxcbiAgICAgICAgICAgICAgICBib3JkZXJCb3R0b21MZWZ0UmFkaXVzOiBjb250YWluZXJCb3JkZXJSYWRpdXMsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8Q29tcG9uZW50XG4gICAgICAgICAgICAgIHRlc3RJRD1cImJ1dHRvbkdyb3VwSXRlbVwiXG4gICAgICAgICAgICAgIGFjdGl2ZU9wYWNpdHk9e2FjdGl2ZU9wYWNpdHl9XG4gICAgICAgICAgICAgIHNldE9wYWNpdHlUbz17c2V0T3BhY2l0eVRvfVxuICAgICAgICAgICAgICBvbkhpZGVVbmRlcmxheT17b25IaWRlVW5kZXJsYXl9XG4gICAgICAgICAgICAgIG9uU2hvd1VuZGVybGF5PXtvblNob3dVbmRlcmxheX1cbiAgICAgICAgICAgICAgdW5kZXJsYXlDb2xvcj17dW5kZXJsYXlDb2xvcn1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzRGlzYWJsZWR9XG4gICAgICAgICAgICAgIG9uUHJlc3M9eygpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0TXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEluZGV4ZXMuaW5jbHVkZXMoaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgb25QcmVzcyhzZWxlY3RlZEluZGV4ZXMuZmlsdGVyKGluZGV4ID0+IGluZGV4ICE9PSBpKSk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvblByZXNzKFsuLi5zZWxlY3RlZEluZGV4ZXMsIGldKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgb25QcmVzcyhpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIHN0eWxlPXtzdHlsZXMuYnV0dG9ufVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAgICAgIHN0eWxlPXtTdHlsZVNoZWV0LmZsYXR0ZW4oW1xuICAgICAgICAgICAgICAgICAgc3R5bGVzLnRleHRDb250YWluZXIsXG4gICAgICAgICAgICAgICAgICBidXR0b25TdHlsZSAmJiBidXR0b25TdHlsZSxcbiAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQgJiYge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLmNvbG9ycy5wcmltYXJ5LFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQgJiYgc2VsZWN0ZWRCdXR0b25TdHlsZSAmJiBzZWxlY3RlZEJ1dHRvblN0eWxlLFxuICAgICAgICAgICAgICAgICAgaXNEaXNhYmxlZCAmJiBzdHlsZXMuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICBpc0Rpc2FibGVkICYmIGRpc2FibGVkU3R5bGUsXG4gICAgICAgICAgICAgICAgICBpc0Rpc2FibGVkICYmIGlzU2VsZWN0ZWQgJiYgc3R5bGVzLmRpc2FibGVkU2VsZWN0ZWQodGhlbWUpLFxuICAgICAgICAgICAgICAgICAgaXNEaXNhYmxlZCAmJiBpc1NlbGVjdGVkICYmIGRpc2FibGVkU2VsZWN0ZWRTdHlsZSxcbiAgICAgICAgICAgICAgICBdKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtidXR0b24uZWxlbWVudCA/IChcbiAgICAgICAgICAgICAgICAgIDxidXR0b24uZWxlbWVudCAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8VGV4dFxuICAgICAgICAgICAgICAgICAgICB0ZXN0SUQ9XCJidXR0b25Hcm91cEl0ZW1UZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e1N0eWxlU2hlZXQuZmxhdHRlbihbXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGVzLmJ1dHRvblRleHQodGhlbWUpLFxuICAgICAgICAgICAgICAgICAgICAgIHRleHRTdHlsZSAmJiB0ZXh0U3R5bGUsXG4gICAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZCAmJiB7IGNvbG9yOiAnI2ZmZicgfSxcbiAgICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkICYmIHNlbGVjdGVkVGV4dFN0eWxlLFxuICAgICAgICAgICAgICAgICAgICAgIGlzRGlzYWJsZWQgJiYgc3R5bGVzLmRpc2FibGVkVGV4dCh0aGVtZSksXG4gICAgICAgICAgICAgICAgICAgICAgaXNEaXNhYmxlZCAmJiBkaXNhYmxlZFRleHRTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICBpc0Rpc2FibGVkICYmIGlzU2VsZWN0ZWQgJiYgZGlzYWJsZWRTZWxlY3RlZFRleHRTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgXSl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtidXR0b259XG4gICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgICAgPC9Db21wb25lbnQ+XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICApO1xuICAgICAgfSl9XG4gICAgPC9WaWV3PlxuICApO1xufTtcblxuY29uc3Qgc3R5bGVzID0ge1xuICBidXR0b246IHtcbiAgICBmbGV4OiAxLFxuICB9LFxuICB0ZXh0Q29udGFpbmVyOiB7XG4gICAgZmxleDogMSxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIH0sXG4gIGNvbnRhaW5lcjoge1xuICAgIG1hcmdpbkxlZnQ6IDEwLFxuICAgIG1hcmdpblJpZ2h0OiAxMCxcbiAgICBtYXJnaW5Cb3R0b206IDUsXG4gICAgbWFyZ2luVG9wOiA1LFxuICAgIGJvcmRlckNvbG9yOiAnI2UzZTNlMycsXG4gICAgYm9yZGVyV2lkdGg6IDEsXG4gICAgZmxleERpcmVjdGlvbjogJ3JvdycsXG4gICAgYm9yZGVyUmFkaXVzOiAzLFxuICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmJyxcbiAgICBoZWlnaHQ6IDQwLFxuICB9LFxuICBidXR0b25UZXh0OiB0aGVtZSA9PiAoe1xuICAgIGZvbnRTaXplOiBub3JtYWxpemVUZXh0KDEzKSxcbiAgICBjb2xvcjogdGhlbWUuY29sb3JzLmdyZXkyLFxuICAgIC4uLlBsYXRmb3JtLnNlbGVjdCh7XG4gICAgICBhbmRyb2lkOiB7fSxcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgZm9udFdlaWdodDogJzUwMCcsXG4gICAgICB9LFxuICAgIH0pLFxuICB9KSxcbiAgZGlzYWJsZWQ6IHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gIH0sXG4gIGRpc2FibGVkVGV4dDogdGhlbWUgPT4gKHtcbiAgICBjb2xvcjogY29sb3IodGhlbWUuY29sb3JzLmRpc2FibGVkKVxuICAgICAgLmRhcmtlbigwLjMpXG4gICAgICAudG9TdHJpbmcoKSxcbiAgfSksXG4gIGRpc2FibGVkU2VsZWN0ZWQ6IHRoZW1lID0+ICh7XG4gICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5jb2xvcnMuZGlzYWJsZWQsXG4gIH0pLFxufTtcblxuQnV0dG9uR3JvdXAucHJvcFR5cGVzID0ge1xuICBidXR0b246IFByb3BUeXBlcy5vYmplY3QsXG4gIENvbXBvbmVudDogUHJvcFR5cGVzLmVsZW1lbnRUeXBlLFxuICBvblByZXNzOiBQcm9wVHlwZXMuZnVuYyxcbiAgYnV0dG9uczogUHJvcFR5cGVzLmFycmF5LFxuICBjb250YWluZXJTdHlsZTogVmlld1Byb3BUeXBlcy5zdHlsZSxcbiAgdGV4dFN0eWxlOiBOYXRpdmVUZXh0LnByb3BUeXBlcy5zdHlsZSxcbiAgc2VsZWN0ZWRUZXh0U3R5bGU6IE5hdGl2ZVRleHQucHJvcFR5cGVzLnN0eWxlLFxuICBzZWxlY3RlZEJ1dHRvblN0eWxlOiBWaWV3UHJvcFR5cGVzLnN0eWxlLFxuICB1bmRlcmxheUNvbG9yOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBzZWxlY3RlZEluZGV4OiBQcm9wVHlwZXMubnVtYmVyLFxuICBzZWxlY3RlZEluZGV4ZXM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5udW1iZXIpLFxuICBhY3RpdmVPcGFjaXR5OiBQcm9wVHlwZXMubnVtYmVyLFxuICBvbkhpZGVVbmRlcmxheTogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uU2hvd1VuZGVybGF5OiBQcm9wVHlwZXMuZnVuYyxcbiAgc2V0T3BhY2l0eVRvOiBQcm9wVHlwZXMuZnVuYyxcbiAgaW5uZXJCb3JkZXJTdHlsZTogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICBjb2xvcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB3aWR0aDogUHJvcFR5cGVzLm51bWJlcixcbiAgfSksXG4gIGxhc3RCb3JkZXJTdHlsZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgVmlld1Byb3BUeXBlcy5zdHlsZSxcbiAgICBOYXRpdmVUZXh0LnByb3BUeXBlcy5zdHlsZSxcbiAgXSksXG4gIGJ1dHRvblN0eWxlOiBWaWV3UHJvcFR5cGVzLnN0eWxlLFxuICBjb250YWluZXJCb3JkZXJSYWRpdXM6IFByb3BUeXBlcy5udW1iZXIsXG4gIHNlbGVjdE11bHRpcGxlOiBQcm9wVHlwZXMuYm9vbCxcbiAgdGhlbWU6IFByb3BUeXBlcy5vYmplY3QsXG4gIGRpc2FibGVkOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICBQcm9wVHlwZXMuYm9vbCxcbiAgICBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMubnVtYmVyKSxcbiAgXSksXG4gIGRpc2FibGVkU3R5bGU6IFZpZXdQcm9wVHlwZXMuc3R5bGUsXG4gIGRpc2FibGVkVGV4dFN0eWxlOiBOYXRpdmVUZXh0LnByb3BUeXBlcy5zdHlsZSxcbiAgZGlzYWJsZWRTZWxlY3RlZFN0eWxlOiBWaWV3UHJvcFR5cGVzLnN0eWxlLFxuICBkaXNhYmxlZFNlbGVjdGVkVGV4dFN0eWxlOiBOYXRpdmVUZXh0LnByb3BUeXBlcy5zdHlsZSxcbn07XG5cbkJ1dHRvbkdyb3VwLmRlZmF1bHRQcm9wcyA9IHtcbiAgc2VsZWN0ZWRJbmRleDogbnVsbCxcbiAgc2VsZWN0ZWRJbmRleGVzOiBbXSxcbiAgc2VsZWN0TXVsdGlwbGU6IGZhbHNlLFxuICBjb250YWluZXJCb3JkZXJSYWRpdXM6IDMsXG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgQ29tcG9uZW50OiBQbGF0Zm9ybS5zZWxlY3Qoe1xuICAgIGFuZHJvaWQ6IFRvdWNoYWJsZU5hdGl2ZUZlZWRiYWNrLFxuICAgIGRlZmF1bHQ6IFRvdWNoYWJsZU9wYWNpdHksXG4gIH0pLFxuICBvblByZXNzOiAoKSA9PiBudWxsLFxufTtcblxuZXhwb3J0IHsgQnV0dG9uR3JvdXAgfTtcbmV4cG9ydCBkZWZhdWx0IHdpdGhUaGVtZShCdXR0b25Hcm91cCwgJ0J1dHRvbkdyb3VwJyk7XG4iXX0=