56c432d7958a757d4a47cfec540a10a5
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.Avatar = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactNative = require("react-native");

var _config = require("../config");

var _helpers = require("../helpers");

var _Icon = _interopRequireDefault(require("../icons/Icon"));

var _Image = _interopRequireDefault(require("../image/Image"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var avatarSizes = {
  small: 34,
  medium: 50,
  large: 75,
  xlarge: 150
};
var defaultEditButton = {
  name: 'mode-edit',
  type: 'material',
  color: '#fff',
  underlayColor: '#000'
};

var Avatar = function Avatar(_ref) {
  var onPress = _ref.onPress,
      onLongPress = _ref.onLongPress,
      _ref$Component = _ref.Component,
      Component = _ref$Component === void 0 ? onPress || onLongPress ? _reactNative.TouchableOpacity : _reactNative.View : _ref$Component,
      containerStyle = _ref.containerStyle,
      icon = _ref.icon,
      iconStyle = _ref.iconStyle,
      source = _ref.source,
      size = _ref.size,
      avatarStyle = _ref.avatarStyle,
      rounded = _ref.rounded,
      title = _ref.title,
      titleStyle = _ref.titleStyle,
      overlayContainerStyle = _ref.overlayContainerStyle,
      showEditButton = _ref.showEditButton,
      passedEditButton = _ref.editButton,
      onEditPress = _ref.onEditPress,
      imageProps = _ref.imageProps,
      placeholderStyle = _ref.placeholderStyle,
      renderPlaceholderContent = _ref.renderPlaceholderContent,
      ImageComponent = _ref.ImageComponent,
      attributes = (0, _objectWithoutProperties2.default)(_ref, ["onPress", "onLongPress", "Component", "containerStyle", "icon", "iconStyle", "source", "size", "avatarStyle", "rounded", "title", "titleStyle", "overlayContainerStyle", "showEditButton", "editButton", "onEditPress", "imageProps", "placeholderStyle", "renderPlaceholderContent", "ImageComponent"]);
  var width = typeof size === 'number' ? size : avatarSizes[size] || avatarSizes.small;
  var height = width;
  var titleSize = width / 2;
  var iconSize = width / 2;

  var editButton = _objectSpread({}, defaultEditButton, {}, passedEditButton);

  var editButtonSize = editButton.size || (width + height) / 2 / 3;

  var Utils = showEditButton && _react.default.createElement(_reactNative.TouchableHighlight, {
    style: _reactNative.StyleSheet.flatten([styles.editButton, {
      width: editButtonSize,
      height: editButtonSize,
      borderRadius: editButtonSize / 2
    }, editButton.style]),
    underlayColor: editButton.underlayColor,
    onPress: onEditPress
  }, _react.default.createElement(_reactNative.View, null, _react.default.createElement(_Icon.default, (0, _extends2.default)({
    size: editButtonSize * 0.8
  }, editButton))));

  var PlaceholderContent = renderPlaceholderContent && (0, _helpers.renderNode)(undefined, renderPlaceholderContent) || title && _react.default.createElement(_reactNative.Text, {
    style: _reactNative.StyleSheet.flatten([styles.title, {
      fontSize: titleSize
    }, titleStyle])
  }, title) || icon && _react.default.createElement(_Icon.default, {
    style: iconStyle && iconStyle,
    color: icon.color || 'white',
    name: icon.name || 'user',
    size: icon.size || iconSize,
    type: icon.type && icon.type
  });

  var hidePlaceholder = !source;
  return _react.default.createElement(Component, (0, _extends2.default)({
    onPress: onPress,
    onLongPress: onLongPress,
    style: _reactNative.StyleSheet.flatten([styles.container, {
      height: height,
      width: width
    }, rounded && {
      borderRadius: width / 2
    }, containerStyle])
  }, attributes), _react.default.createElement(_Image.default, (0, _extends2.default)({
    placeholderStyle: _reactNative.StyleSheet.flatten([placeholderStyle, hidePlaceholder && {
      backgroundColor: 'transparent'
    }]),
    PlaceholderContent: PlaceholderContent,
    containerStyle: _reactNative.StyleSheet.flatten([styles.overlayContainer, overlayContainerStyle, rounded && {
      borderRadius: width / 2,
      overflow: 'hidden'
    }]),
    source: source
  }, imageProps, {
    style: _reactNative.StyleSheet.flatten([styles.avatar, imageProps && imageProps.style, avatarStyle]),
    ImageComponent: ImageComponent
  })), Utils);
};

exports.Avatar = Avatar;

var styles = _reactNative.StyleSheet.create({
  container: {
    backgroundColor: 'transparent'
  },
  avatar: {
    flex: 1,
    width: null,
    height: null
  },
  overlayContainer: {
    flex: 1,
    backgroundColor: '#bdbdbd'
  },
  title: {
    color: '#ffffff',
    backgroundColor: 'transparent',
    textAlign: 'center'
  },
  editButton: _objectSpread({
    position: 'absolute',
    bottom: 0,
    right: 0,
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#aaa'
  }, _reactNative.Platform.select({
    android: {
      elevation: 1
    },
    default: {
      shadowColor: '#000',
      shadowOffset: {
        width: 1,
        height: 1
      },
      shadowRadius: 2,
      shadowOpacity: 0.5
    }
  }))
});

Avatar.propTypes = {
  Component: _propTypes.default.oneOf([_reactNative.View, _reactNative.TouchableOpacity, _reactNative.TouchableHighlight, _reactNative.TouchableNativeFeedback, _reactNative.TouchableWithoutFeedback]),
  onPress: _propTypes.default.func,
  onLongPress: _propTypes.default.func,
  containerStyle: _config.ViewPropTypes.style,
  source: _reactNative.Image.propTypes.source,
  avatarStyle: _config.ViewPropTypes.style,
  rounded: _propTypes.default.bool,
  title: _propTypes.default.string,
  titleStyle: _reactNative.Text.propTypes.style,
  overlayContainerStyle: _config.ViewPropTypes.style,
  activeOpacity: _propTypes.default.number,
  icon: _propTypes.default.object,
  iconStyle: _reactNative.Text.propTypes.style,
  size: _propTypes.default.oneOfType([_propTypes.default.oneOf(['small', 'medium', 'large', 'xlarge']), _propTypes.default.number]),
  showEditButton: _propTypes.default.bool,
  onEditPress: _propTypes.default.func,
  editButton: _propTypes.default.shape({
    size: _propTypes.default.number,
    name: _propTypes.default.string,
    type: _propTypes.default.string,
    color: _propTypes.default.string,
    underlayColor: _propTypes.default.string,
    style: _config.ViewPropTypes.style
  }),
  placeholderStyle: _config.ViewPropTypes.style,
  renderPlaceholderContent: _helpers.nodeType,
  imageProps: _propTypes.default.object,
  ImageComponent: _propTypes.default.elementType
};
Avatar.defaultProps = {
  showEditButton: false,
  onEditPress: null,
  size: 'small',
  editButton: defaultEditButton,
  ImageComponent: _reactNative.Image
};

var _default = (0, _config.withTheme)(Avatar, 'Avatar');

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkF2YXRhci5qcyJdLCJuYW1lcyI6WyJhdmF0YXJTaXplcyIsInNtYWxsIiwibWVkaXVtIiwibGFyZ2UiLCJ4bGFyZ2UiLCJkZWZhdWx0RWRpdEJ1dHRvbiIsIm5hbWUiLCJ0eXBlIiwiY29sb3IiLCJ1bmRlcmxheUNvbG9yIiwiQXZhdGFyIiwib25QcmVzcyIsIm9uTG9uZ1ByZXNzIiwiQ29tcG9uZW50IiwiVG91Y2hhYmxlT3BhY2l0eSIsIlZpZXciLCJjb250YWluZXJTdHlsZSIsImljb24iLCJpY29uU3R5bGUiLCJzb3VyY2UiLCJzaXplIiwiYXZhdGFyU3R5bGUiLCJyb3VuZGVkIiwidGl0bGUiLCJ0aXRsZVN0eWxlIiwib3ZlcmxheUNvbnRhaW5lclN0eWxlIiwic2hvd0VkaXRCdXR0b24iLCJwYXNzZWRFZGl0QnV0dG9uIiwiZWRpdEJ1dHRvbiIsIm9uRWRpdFByZXNzIiwiaW1hZ2VQcm9wcyIsInBsYWNlaG9sZGVyU3R5bGUiLCJyZW5kZXJQbGFjZWhvbGRlckNvbnRlbnQiLCJJbWFnZUNvbXBvbmVudCIsImF0dHJpYnV0ZXMiLCJ3aWR0aCIsImhlaWdodCIsInRpdGxlU2l6ZSIsImljb25TaXplIiwiZWRpdEJ1dHRvblNpemUiLCJVdGlscyIsIlN0eWxlU2hlZXQiLCJmbGF0dGVuIiwic3R5bGVzIiwiYm9yZGVyUmFkaXVzIiwic3R5bGUiLCJQbGFjZWhvbGRlckNvbnRlbnQiLCJ1bmRlZmluZWQiLCJmb250U2l6ZSIsImhpZGVQbGFjZWhvbGRlciIsImNvbnRhaW5lciIsImJhY2tncm91bmRDb2xvciIsIm92ZXJsYXlDb250YWluZXIiLCJvdmVyZmxvdyIsImF2YXRhciIsImNyZWF0ZSIsImZsZXgiLCJ0ZXh0QWxpZ24iLCJwb3NpdGlvbiIsImJvdHRvbSIsInJpZ2h0IiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50IiwiUGxhdGZvcm0iLCJzZWxlY3QiLCJhbmRyb2lkIiwiZWxldmF0aW9uIiwiZGVmYXVsdCIsInNoYWRvd0NvbG9yIiwic2hhZG93T2Zmc2V0Iiwic2hhZG93UmFkaXVzIiwic2hhZG93T3BhY2l0eSIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsIm9uZU9mIiwiVG91Y2hhYmxlSGlnaGxpZ2h0IiwiVG91Y2hhYmxlTmF0aXZlRmVlZGJhY2siLCJUb3VjaGFibGVXaXRob3V0RmVlZGJhY2siLCJmdW5jIiwiVmlld1Byb3BUeXBlcyIsIlJOSW1hZ2UiLCJib29sIiwic3RyaW5nIiwiVGV4dCIsImFjdGl2ZU9wYWNpdHkiLCJudW1iZXIiLCJvYmplY3QiLCJvbmVPZlR5cGUiLCJzaGFwZSIsIm5vZGVUeXBlIiwiZWxlbWVudFR5cGUiLCJkZWZhdWx0UHJvcHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFZQTs7QUFDQTs7QUFFQTs7QUFDQTs7Ozs7O0FBRUEsSUFBTUEsV0FBVyxHQUFHO0FBQ2xCQyxFQUFBQSxLQUFLLEVBQUUsRUFEVztBQUVsQkMsRUFBQUEsTUFBTSxFQUFFLEVBRlU7QUFHbEJDLEVBQUFBLEtBQUssRUFBRSxFQUhXO0FBSWxCQyxFQUFBQSxNQUFNLEVBQUU7QUFKVSxDQUFwQjtBQU9BLElBQU1DLGlCQUFpQixHQUFHO0FBQ3hCQyxFQUFBQSxJQUFJLEVBQUUsV0FEa0I7QUFFeEJDLEVBQUFBLElBQUksRUFBRSxVQUZrQjtBQUd4QkMsRUFBQUEsS0FBSyxFQUFFLE1BSGlCO0FBSXhCQyxFQUFBQSxhQUFhLEVBQUU7QUFKUyxDQUExQjs7QUFPQSxJQUFNQyxNQUFNLEdBQUcsU0FBVEEsTUFBUyxPQXNCVDtBQUFBLE1BckJKQyxPQXFCSSxRQXJCSkEsT0FxQkk7QUFBQSxNQXBCSkMsV0FvQkksUUFwQkpBLFdBb0JJO0FBQUEsNEJBbkJKQyxTQW1CSTtBQUFBLE1BbkJKQSxTQW1CSSwrQkFuQlFGLE9BQU8sSUFBSUMsV0FBWCxHQUF5QkUsNkJBQXpCLEdBQTRDQyxpQkFtQnBEO0FBQUEsTUFsQkpDLGNBa0JJLFFBbEJKQSxjQWtCSTtBQUFBLE1BakJKQyxJQWlCSSxRQWpC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SUFBQUEsSUFBSSxFQUFFcUQsbUJBQVVZLE1BRFU7QUFFMUIvRSxJQUFBQSxJQUFJLEVBQUVtRSxtQkFBVVMsTUFGVTtBQUcxQjNFLElBQUFBLElBQUksRUFBRWtFLG1CQUFVUyxNQUhVO0FBSTFCMUUsSUFBQUEsS0FBSyxFQUFFaUUsbUJBQVVTLE1BSlM7QUFLMUJ6RSxJQUFBQSxhQUFhLEVBQUVnRSxtQkFBVVMsTUFMQztBQU0xQnJDLElBQUFBLEtBQUssRUFBRWtDLHNCQUFjbEM7QUFOSyxHQUFoQixDQTFCSztBQWtDakJkLEVBQUFBLGdCQUFnQixFQUFFZ0Qsc0JBQWNsQyxLQWxDZjtBQW1DakJiLEVBQUFBLHdCQUF3QixFQUFFeUQsaUJBbkNUO0FBb0NqQjNELEVBQUFBLFVBQVUsRUFBRTJDLG1CQUFVYSxNQXBDTDtBQXFDakJyRCxFQUFBQSxjQUFjLEVBQUV3QyxtQkFBVWlCO0FBckNULENBQW5CO0FBd0NBaEYsTUFBTSxDQUFDaUYsWUFBUCxHQUFzQjtBQUNwQmpFLEVBQUFBLGNBQWMsRUFBRSxLQURJO0FBRXBCRyxFQUFBQSxXQUFXLEVBQUUsSUFGTztBQUdwQlQsRUFBQUEsSUFBSSxFQUFFLE9BSGM7QUFJcEJRLEVBQUFBLFVBQVUsRUFBRXZCLGlCQUpRO0FBS3BCNEIsRUFBQUEsY0FBYyxFQUFFK0M7QUFMSSxDQUF0Qjs7ZUFTZSx1QkFBVXRFLE1BQVYsRUFBa0IsUUFBbEIsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHtcbiAgVmlldyxcbiAgVGV4dCxcbiAgSW1hZ2UgYXMgUk5JbWFnZSxcbiAgUGxhdGZvcm0sXG4gIFN0eWxlU2hlZXQsXG4gIFRvdWNoYWJsZU9wYWNpdHksXG4gIFRvdWNoYWJsZUhpZ2hsaWdodCxcbiAgVG91Y2hhYmxlTmF0aXZlRmVlZGJhY2ssXG4gIFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayxcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcblxuaW1wb3J0IHsgd2l0aFRoZW1lLCBWaWV3UHJvcFR5cGVzIH0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCB7IHJlbmRlck5vZGUsIG5vZGVUeXBlIH0gZnJvbSAnLi4vaGVscGVycyc7XG5cbmltcG9ydCBJY29uIGZyb20gJy4uL2ljb25zL0ljb24nO1xuaW1wb3J0IEltYWdlIGZyb20gJy4uL2ltYWdlL0ltYWdlJztcblxuY29uc3QgYXZhdGFyU2l6ZXMgPSB7XG4gIHNtYWxsOiAzNCxcbiAgbWVkaXVtOiA1MCxcbiAgbGFyZ2U6IDc1LFxuICB4bGFyZ2U6IDE1MCxcbn07XG5cbmNvbnN0IGRlZmF1bHRFZGl0QnV0dG9uID0ge1xuICBuYW1lOiAnbW9kZS1lZGl0JyxcbiAgdHlwZTogJ21hdGVyaWFsJyxcbiAgY29sb3I6ICcjZmZmJyxcbiAgdW5kZXJsYXlDb2xvcjogJyMwMDAnLFxufTtcblxuY29uc3QgQXZhdGFyID0gKHtcbiAgb25QcmVzcyxcbiAgb25Mb25nUHJlc3MsXG4gIENvbXBvbmVudCA9IG9uUHJlc3MgfHwgb25Mb25nUHJlc3MgPyBUb3VjaGFibGVPcGFjaXR5IDogVmlldyxcbiAgY29udGFpbmVyU3R5bGUsXG4gIGljb24sXG4gIGljb25TdHlsZSxcbiAgc291cmNlLFxuICBzaXplLFxuICBhdmF0YXJTdHlsZSxcbiAgcm91bmRlZCxcbiAgdGl0bGUsXG4gIHRpdGxlU3R5bGUsXG4gIG92ZXJsYXlDb250YWluZXJTdHlsZSxcbiAgc2hvd0VkaXRCdXR0b24sXG4gIGVkaXRCdXR0b246IHBhc3NlZEVkaXRCdXR0b24sXG4gIG9uRWRpdFByZXNzLFxuICBpbWFnZVByb3BzLFxuICBwbGFjZWhvbGRlclN0eWxlLFxuICByZW5kZXJQbGFjZWhvbGRlckNvbnRlbnQsXG4gIEltYWdlQ29tcG9uZW50LFxuICAuLi5hdHRyaWJ1dGVzXG59KSA9PiB7XG4gIGNvbnN0IHdpZHRoID1cbiAgICB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogYXZhdGFyU2l6ZXNbc2l6ZV0gfHwgYXZhdGFyU2l6ZXMuc21hbGw7XG4gIGNvbnN0IGhlaWdodCA9IHdpZHRoO1xuICBjb25zdCB0aXRsZVNpemUgPSB3aWR0aCAvIDI7XG4gIGNvbnN0IGljb25TaXplID0gd2lkdGggLyAyO1xuXG4gIGNvbnN0IGVkaXRCdXR0b24gPSB7XG4gICAgLi4uZGVmYXVsdEVkaXRCdXR0b24sXG4gICAgLi4ucGFzc2VkRWRpdEJ1dHRvbixcbiAgfTtcbiAgY29uc3QgZWRpdEJ1dHRvblNpemUgPSBlZGl0QnV0dG9uLnNpemUgfHwgKHdpZHRoICsgaGVpZ2h0KSAvIDIgLyAzO1xuXG4gIGNvbnN0IFV0aWxzID0gc2hvd0VkaXRCdXR0b24gJiYgKFxuICAgIDxUb3VjaGFibGVIaWdobGlnaHRcbiAgICAgIHN0eWxlPXtTdHlsZVNoZWV0LmZsYXR0ZW4oW1xuICAgICAgICBzdHlsZXMuZWRpdEJ1dHRvbixcbiAgICAgICAge1xuICAgICAgICAgIHdpZHRoOiBlZGl0QnV0dG9uU2l6ZSxcbiAgICAgICAgICBoZWlnaHQ6IGVkaXRCdXR0b25TaXplLFxuICAgICAgICAgIGJvcmRlclJhZGl1czogZWRpdEJ1dHRvblNpemUgLyAyLFxuICAgICAgICB9LFxuICAgICAgICBlZGl0QnV0dG9uLnN0eWxlLFxuICAgICAgXSl9XG4gICAgICB1bmRlcmxheUNvbG9yPXtlZGl0QnV0dG9uLnVuZGVybGF5Q29sb3J9XG4gICAgICBvblByZXNzPXtvbkVkaXRQcmVzc31cbiAgICA+XG4gICAgICA8Vmlldz5cbiAgICAgICAgPEljb24gc2l6ZT17ZWRpdEJ1dHRvblNpemUgKiAwLjh9IHsuLi5lZGl0QnV0dG9ufSAvPlxuICAgICAgPC9WaWV3PlxuICAgIDwvVG91Y2hhYmxlSGlnaGxpZ2h0PlxuICApO1xuXG4gIGNvbnN0IFBsYWNlaG9sZGVyQ29udGVudCA9XG4gICAgKHJlbmRlclBsYWNlaG9sZGVyQ29udGVudCAmJlxuICAgICAgcmVuZGVyTm9kZSh1bmRlZmluZWQsIHJlbmRlclBsYWNlaG9sZGVyQ29udGVudCkpIHx8XG4gICAgKHRpdGxlICYmIChcbiAgICAgIDxUZXh0XG4gICAgICAgIHN0eWxlPXtTdHlsZVNoZWV0LmZsYXR0ZW4oW1xuICAgICAgICAgIHN0eWxlcy50aXRsZSxcbiAgICAgICAgICB7IGZvbnRTaXplOiB0aXRsZVNpemUgfSxcbiAgICAgICAgICB0aXRsZVN0eWxlLFxuICAgICAgICBdKX1cbiAgICAgID5cbiAgICAgICAge3RpdGxlfVxuICAgICAgPC9UZXh0PlxuICAgICkpIHx8XG4gICAgKGljb24gJiYgKFxuICAgICAgPEljb25cbiAgICAgICAgc3R5bGU9e2ljb25TdHlsZSAmJiBpY29uU3R5bGV9XG4gICAgICAgIGNvbG9yPXtpY29uLmNvbG9yIHx8ICd3aGl0ZSd9XG4gICAgICAgIG5hbWU9e2ljb24ubmFtZSB8fCAndXNlcid9XG4gICAgICAgIHNpemU9e2ljb24uc2l6ZSB8fCBpY29uU2l6ZX1cbiAgICAgICAgdHlwZT17aWNvbi50eXBlICYmIGljb24udHlwZX1cbiAgICAgIC8+XG4gICAgKSk7XG5cbiAgLy8gUmVtb3ZlIHBsYWNlaG9sZGVyIHN0eWxpbmcgaWYgd2UncmUgbm90IHVzaW5nIGltYWdlXG4gIGNvbnN0IGhpZGVQbGFjZWhvbGRlciA9ICFzb3VyY2U7XG5cbiAgcmV0dXJuIChcbiAgICA8Q29tcG9uZW50XG4gICAgICBvblByZXNzPXtvblByZXNzfVxuICAgICAgb25Mb25nUHJlc3M9e29uTG9uZ1ByZXNzfVxuICAgICAgc3R5bGU9e1N0eWxlU2hlZXQuZmxhdHRlbihbXG4gICAgICAgIHN0eWxlcy5jb250YWluZXIsXG4gICAgICAgIHsgaGVpZ2h0LCB3aWR0aCB9LFxuICAgICAgICByb3VuZGVkICYmIHsgYm9yZGVyUmFkaXVzOiB3aWR0aCAvIDIgfSxcbiAgICAgICAgY29udGFpbmVyU3R5bGUsXG4gICAgICBdKX1cbiAgICAgIHsuLi5hdHRyaWJ1dGVzfVxuICAgID5cbiAgICAgIDxJbWFnZVxuICAgICAgICBwbGFjZWhvbGRlclN0eWxlPXtTdHlsZVNoZWV0LmZsYXR0ZW4oW1xuICAgICAgICAgIHBsYWNlaG9sZGVyU3R5bGUsXG4gICAgICAgICAgaGlkZVBsYWNlaG9sZGVyICYmIHsgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnIH0sXG4gICAgICAgIF0pfVxuICAgICAgICBQbGFjZWhvbGRlckNvbnRlbnQ9e1BsYWNlaG9sZGVyQ29udGVudH1cbiAgICAgICAgY29udGFpbmVyU3R5bGU9e1N0eWxlU2hlZXQuZmxhdHRlbihbXG4gICAgICAgICAgc3R5bGVzLm92ZXJsYXlDb250YWluZXIsXG4gICAgICAgICAgb3ZlcmxheUNvbnRhaW5lclN0eWxlLFxuICAgICAgICAgIHJvdW5kZWQgJiYgeyBib3JkZXJSYWRpdXM6IHdpZHRoIC8gMiwgb3ZlcmZsb3c6ICdoaWRkZW4nIH0sXG4gICAgICAgIF0pfVxuICAgICAgICBzb3VyY2U9e3NvdXJjZX1cbiAgICAgICAgey4uLmltYWdlUHJvcHN9XG4gICAgICAgIHN0eWxlPXtTdHlsZVNoZWV0LmZsYXR0ZW4oW1xuICAgICAgICAgIHN0eWxlcy5hdmF0YXIsXG4gICAgICAgICAgaW1hZ2VQcm9wcyAmJiBpbWFnZVByb3BzLnN0eWxlLFxuICAgICAgICAgIGF2YXRhclN0eWxlLFxuICAgICAgICBdKX1cbiAgICAgICAgSW1hZ2VDb21wb25lbnQ9e0ltYWdlQ29tcG9uZW50fVxuICAgICAgLz5cbiAgICAgIHtVdGlsc31cbiAgICA8L0NvbXBvbmVudD5cbiAgKTtcbn07XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgY29udGFpbmVyOiB7XG4gICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLFxuICB9LFxuICBhdmF0YXI6IHtcbiAgICBmbGV4OiAxLFxuICAgIHdpZHRoOiBudWxsLFxuICAgIGhlaWdodDogbnVsbCxcbiAgfSxcbiAgb3ZlcmxheUNvbnRhaW5lcjoge1xuICAgIGZsZXg6IDEsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnI2JkYmRiZCcsXG4gIH0sXG4gIHRpdGxlOiB7XG4gICAgY29sb3I6ICcjZmZmZmZmJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgfSxcbiAgZWRpdEJ1dHRvbjoge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIGJvdHRvbTogMCxcbiAgICByaWdodDogMCxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnI2FhYScsXG4gICAgLi4uUGxhdGZvcm0uc2VsZWN0KHtcbiAgICAgIGFuZHJvaWQ6IHtcbiAgICAgICAgZWxldmF0aW9uOiAxLFxuICAgICAgfSxcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgc2hhZG93Q29sb3I6ICcjMDAwJyxcbiAgICAgICAgc2hhZG93T2Zmc2V0OiB7IHdpZHRoOiAxLCBoZWlnaHQ6IDEgfSxcbiAgICAgICAgc2hhZG93UmFkaXVzOiAyLFxuICAgICAgICBzaGFkb3dPcGFjaXR5OiAwLjUsXG4gICAgICB9LFxuICAgIH0pLFxuICB9LFxufSk7XG5cbkF2YXRhci5wcm9wVHlwZXMgPSB7XG4gIENvbXBvbmVudDogUHJvcFR5cGVzLm9uZU9mKFtcbiAgICBWaWV3LFxuICAgIFRvdWNoYWJsZU9wYWNpdHksXG4gICAgVG91Y2hhYmxlSGlnaGxpZ2h0LFxuICAgIFRvdWNoYWJsZU5hdGl2ZUZlZWRiYWNrLFxuICAgIFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayxcbiAgXSksXG4gIG9uUHJlc3M6IFByb3BUeXBlcy5mdW5jLFxuICBvbkxvbmdQcmVzczogUHJvcFR5cGVzLmZ1bmMsXG4gIGNvbnRhaW5lclN0eWxlOiBWaWV3UHJvcFR5cGVzLnN0eWxlLFxuICBzb3VyY2U6IFJOSW1hZ2UucHJvcFR5cGVzLnNvdXJjZSxcbiAgYXZhdGFyU3R5bGU6IFZpZXdQcm9wVHlwZXMuc3R5bGUsXG4gIHJvdW5kZWQ6IFByb3BUeXBlcy5ib29sLFxuICB0aXRsZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgdGl0bGVTdHlsZTogVGV4dC5wcm9wVHlwZXMuc3R5bGUsXG4gIG92ZXJsYXlDb250YWluZXJTdHlsZTogVmlld1Byb3BUeXBlcy5zdHlsZSxcbiAgYWN0aXZlT3BhY2l0eTogUHJvcFR5cGVzLm51bWJlcixcbiAgaWNvbjogUHJvcFR5cGVzLm9iamVjdCxcbiAgaWNvblN0eWxlOiBUZXh0LnByb3BUeXBlcy5zdHlsZSxcbiAgc2l6ZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgUHJvcFR5cGVzLm9uZU9mKFsnc21hbGwnLCAnbWVkaXVtJywgJ2xhcmdlJywgJ3hsYXJnZSddKSxcbiAgICBQcm9wVHlwZXMubnVtYmVyLFxuICBdKSxcbiAgc2hvd0VkaXRCdXR0b246IFByb3BUeXBlcy5ib29sLFxuICBvbkVkaXRQcmVzczogUHJvcFR5cGVzLmZ1bmMsXG4gIGVkaXRCdXR0b246IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgc2l6ZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHR5cGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY29sb3I6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdW5kZXJsYXlDb2xvcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBzdHlsZTogVmlld1Byb3BUeXBlcy5zdHlsZSxcbiAgfSksXG4gIHBsYWNlaG9sZGVyU3R5bGU6IFZpZXdQcm9wVHlwZXMuc3R5bGUsXG4gIHJlbmRlclBsYWNlaG9sZGVyQ29udGVudDogbm9kZVR5cGUsXG4gIGltYWdlUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG4gIEltYWdlQ29tcG9uZW50OiBQcm9wVHlwZXMuZWxlbWVudFR5cGUsXG59O1xuXG5BdmF0YXIuZGVmYXVsdFByb3BzID0ge1xuICBzaG93RWRpdEJ1dHRvbjogZmFsc2UsXG4gIG9uRWRpdFByZXNzOiBudWxsLFxuICBzaXplOiAnc21hbGwnLFxuICBlZGl0QnV0dG9uOiBkZWZhdWx0RWRpdEJ1dHRvbixcbiAgSW1hZ2VDb21wb25lbnQ6IFJOSW1hZ2UsXG59O1xuXG5leHBvcnQgeyBBdmF0YXIgfTtcbmV4cG9ydCBkZWZhdWx0IHdpdGhUaGVtZShBdmF0YXIsICdBdmF0YXInKTtcbiJdfQ==