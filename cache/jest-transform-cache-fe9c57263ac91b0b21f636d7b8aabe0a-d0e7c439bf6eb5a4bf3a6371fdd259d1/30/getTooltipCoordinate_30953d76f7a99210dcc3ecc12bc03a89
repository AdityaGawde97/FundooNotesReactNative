341589ed67ecb9231eb6ab1efc7182d8
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.getElementVisibleWidth = void 0;

var getArea = function getArea(a, b) {
  return a * b;
};

var getPointDistance = function getPointDistance(a, b) {
  return Math.sqrt(Math.pow(a[0] - b[0], 2) + Math.pow(a[1] - b[1], 2));
};

var getElementVisibleWidth = function getElementVisibleWidth(elementWidth, xOffset, ScreenWidth) {
  if (xOffset >= 0) {
    return xOffset + elementWidth <= ScreenWidth ? elementWidth : ScreenWidth - xOffset;
  }

  return elementWidth - xOffset;
};

exports.getElementVisibleWidth = getElementVisibleWidth;

var getTooltipCoordinate = function getTooltipCoordinate(x, y, width, height, ScreenWidth, ScreenHeight, tooltipWidth, tooltipHeight, withPointer) {
  var center = [x + getElementVisibleWidth(width, x, ScreenWidth) / 2, y + height / 2];
  var pOne = [center[0], 0];
  var pTwo = [ScreenWidth, center[1]];
  var pThree = [center[0], ScreenHeight];
  var pFour = [0, center[1]];
  var vOne = getPointDistance(center, pOne);
  var vTwo = getPointDistance(center, pTwo);
  var vThree = getPointDistance(center, pThree);
  var vFour = getPointDistance(center, pFour);
  var areas = [getArea(vOne, vFour), getArea(vOne, vTwo), getArea(vTwo, vThree), getArea(vThree, vFour)].map(function (each, index) {
    return {
      area: each,
      id: index
    };
  });
  var sortedArea = areas.sort(function (a, b) {
    return b.area - a.area;
  });
  var dX = 0.001;
  var dY = height / 2;
  var directionCorrection = [[-1, -1], [1, -1], [1, 1], [-1, 1]];
  var deslocateReferencePoint = [[-tooltipWidth, -tooltipHeight], [0, -tooltipHeight], [0, 0], [-tooltipWidth, 0]];
  var qIndex = sortedArea[0].id;

  var getWithPointerOffsetY = function getWithPointerOffsetY() {
    return withPointer ? 10 * directionCorrection[qIndex][1] : 0;
  };

  var getWithPointerOffsetX = function getWithPointerOffsetX() {
    return withPointer ? center[0] - 18 * directionCorrection[qIndex][0] : center[0];
  };

  var newX = getWithPointerOffsetX() + (dX * directionCorrection[qIndex][0] + deslocateReferencePoint[qIndex][0]);
  return {
    x: constraintX(newX, qIndex, center[0], ScreenWidth, tooltipWidth),
    y: center[1] + (dY * directionCorrection[qIndex][1] + deslocateReferencePoint[qIndex][1]) + getWithPointerOffsetY()
  };
};

var constraintX = function constraintX(newX, qIndex, x, ScreenWidth, tooltipWidth) {
  switch (qIndex) {
    case 0:
    case 3:
      {
        var maxWidth = newX > ScreenWidth ? ScreenWidth - 10 : newX;
        return newX < 1 ? 10 : maxWidth;
      }

    case 1:
    case 2:
      {
        var leftOverSpace = ScreenWidth - newX;
        return leftOverSpace >= tooltipWidth ? newX : newX - (tooltipWidth - leftOverSpace + 10);
      }

    default:
      {
        return 0;
      }
  }
};

var _default = getTooltipCoordinate;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFRvb2x0aXBDb29yZGluYXRlLmpzIl0sIm5hbWVzIjpbImdldEFyZWEiLCJhIiwiYiIsImdldFBvaW50RGlzdGFuY2UiLCJNYXRoIiwic3FydCIsInBvdyIsImdldEVsZW1lbnRWaXNpYmxlV2lkdGgiLCJlbGVtZW50V2lkdGgiLCJ4T2Zmc2V0IiwiU2NyZWVuV2lkdGgiLCJnZXRUb29sdGlwQ29vcmRpbmF0ZSIsIngiLCJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJTY3JlZW5IZWlnaHQiLCJ0b29sdGlwV2lkdGgiLCJ0b29sdGlwSGVpZ2h0Iiwid2l0aFBvaW50ZXIiLCJjZW50ZXIiLCJwT25lIiwicFR3byIsInBUaHJlZSIsInBGb3VyIiwidk9uZSIsInZUd28iLCJ2VGhyZWUiLCJ2Rm91ciIsImFyZWFzIiwibWFwIiwiZWFjaCIsImluZGV4IiwiYXJlYSIsImlkIiwic29ydGVkQXJlYSIsInNvcnQiLCJkWCIsImRZIiwiZGlyZWN0aW9uQ29ycmVjdGlvbiIsImRlc2xvY2F0ZVJlZmVyZW5jZVBvaW50IiwicUluZGV4IiwiZ2V0V2l0aFBvaW50ZXJPZmZzZXRZIiwiZ2V0V2l0aFBvaW50ZXJPZmZzZXRYIiwibmV3WCIsImNvbnN0cmFpbnRYIiwibWF4V2lkdGgiLCJsZWZ0T3ZlclNwYWNlIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBLElBQU1BLE9BQU8sR0FBRyxTQUFWQSxPQUFVLENBQUNDLENBQUQsRUFBSUMsQ0FBSjtBQUFBLFNBQVVELENBQUMsR0FBR0MsQ0FBZDtBQUFBLENBQWhCOztBQUVBLElBQU1DLGdCQUFnQixHQUFHLFNBQW5CQSxnQkFBbUIsQ0FBQ0YsQ0FBRCxFQUFJQyxDQUFKO0FBQUEsU0FDdkJFLElBQUksQ0FBQ0MsSUFBTCxDQUFVRCxJQUFJLENBQUNFLEdBQUwsQ0FBU0wsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPQyxDQUFDLENBQUMsQ0FBRCxDQUFqQixFQUFzQixDQUF0QixJQUEyQkUsSUFBSSxDQUFDRSxHQUFMLENBQVNMLENB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dUJBQXVCLENBQUNDLE1BQUQsQ0FBdkIsQ0FBZ0MsQ0FBaEMsQ0FGRixJQUdBQyxxQkFBcUI7QUFObEIsR0FBUDtBQVFELENBM0VEOztBQTZFQSxJQUFNRyxXQUFXLEdBQUcsU0FBZEEsV0FBYyxDQUFDRCxJQUFELEVBQU9ILE1BQVAsRUFBZTdCLENBQWYsRUFBa0JGLFdBQWxCLEVBQStCTyxZQUEvQixFQUFnRDtBQUNsRSxVQUFRd0IsTUFBUjtBQUVFLFNBQUssQ0FBTDtBQUNBLFNBQUssQ0FBTDtBQUFRO0FBQ04sWUFBTUssUUFBUSxHQUFHRixJQUFJLEdBQUdsQyxXQUFQLEdBQXFCQSxXQUFXLEdBQUcsRUFBbkMsR0FBd0NrQyxJQUF6RDtBQUNBLGVBQU9BLElBQUksR0FBRyxDQUFQLEdBQVcsRUFBWCxHQUFnQkUsUUFBdkI7QUFDRDs7QUFFRCxTQUFLLENBQUw7QUFDQSxTQUFLLENBQUw7QUFBUTtBQUNOLFlBQU1DLGFBQWEsR0FBR3JDLFdBQVcsR0FBR2tDLElBQXBDO0FBQ0EsZUFBT0csYUFBYSxJQUFJOUIsWUFBakIsR0FDSDJCLElBREcsR0FFSEEsSUFBSSxJQUFJM0IsWUFBWSxHQUFHOEIsYUFBZixHQUErQixFQUFuQyxDQUZSO0FBR0Q7O0FBQ0Q7QUFBUztBQUNQLGVBQU8sQ0FBUDtBQUNEO0FBakJIO0FBbUJELENBcEJEOztlQXNCZXBDLG9CIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2V0QXJlYSA9IChhLCBiKSA9PiBhICogYjtcblxuY29uc3QgZ2V0UG9pbnREaXN0YW5jZSA9IChhLCBiKSA9PlxuICBNYXRoLnNxcnQoTWF0aC5wb3coYVswXSAtIGJbMF0sIDIpICsgTWF0aC5wb3coYVsxXSAtIGJbMV0sIDIpKTtcblxuZXhwb3J0IGNvbnN0IGdldEVsZW1lbnRWaXNpYmxlV2lkdGggPSAoZWxlbWVudFdpZHRoLCB4T2Zmc2V0LCBTY3JlZW5XaWR0aCkgPT4ge1xuICAvLyBFbGVtZW50IGlzIGZ1bGx5IHZpc2libGUgT1Igc2Nyb2xsZWQgcmlnaHRcbiAgaWYgKHhPZmZzZXQgPj0gMCkge1xuICAgIHJldHVybiB4T2Zmc2V0ICsgZWxlbWVudFdpZHRoIDw9IFNjcmVlbldpZHRoIC8vIGlzIGVsZW1lbnQgZnVsbHkgdmlzaWJsZT9cbiAgICAgID8gZWxlbWVudFdpZHRoIC8vIGVsZW1lbnQgaXMgZnVsbHkgdmlzaWJsZTtcbiAgICAgIDogU2NyZWVuV2lkdGggLSB4T2Zmc2V0OyAvLyBjYWxjdWxhdGUgdmlzaWJsZSB3aWR0aCBvZiBzY3JvbGxlZCBlbGVtZW50XG4gIH1cbiAgLy8gRWxlbWVudCBpcyBzY3JvbGxlZCBMRUZUXG5cbiAgcmV0dXJuIGVsZW1lbnRXaWR0aCAtIHhPZmZzZXQ7IC8vIGNhbGN1bGF0ZSB2aXNpYmxlIHdpZHRoIG9mIHNjcm9sbGVkIGVsZW1lbnRcbn07XG5cbi8qXG50eXBlIENvb3JkID0ge1xuICB4OiBudW1iZXIsXG4gIHk6IG51bWJlcixcbn07XG5cbiAgflRvb2x0aXAgY29vcmRpbmF0ZSBzeXN0ZW06flxuICBUaGUgdG9vbHRpcCBjb29yZGluYXRlcyBhcmUgYmFzZWQgb24gdGhlIGVsZW1lbnQgd2hpY2ggaXQgaXMgd3JhcHBpbmcuXG4gIFdlIHRha2UgdGhlIHggYW5kIHkgY29vcmRpbmF0ZXMgb2YgdGhlIGVsZW1lbnQgYW5kIGZpbmQgdGhlIGJlc3QgcG9zaXRpb25cbiAgdG8gcGxhY2UgdGhlIHRvb2x0aXAuIFRvIGZpbmQgdGhlIGJlc3QgcG9zaXRpb24gd2UgbG9vayBmb3IgdGhlIHNpZGUgd2l0aCB0aGVcbiAgbW9zdCBzcGFjZS4gSW4gb3JkZXIgdG8gZmluZCB0aGUgc2lkZSB3aXRoIHRoZSBtb3N0IHNwYWNlIHdlIGRpdmlkZSB0aGUgdGhlXG4gIHN1cnJvdW5kaW5ncyBpbiBmb3VyIHF1YWRyYW50cyBhbmQgY2hlY2sgZm9yIHRoZSBvbmUgd2l0aCBiaWdnZXN0IGFyZWEuXG4gIE9uY2Ugd2Uga25vdyB0aGUgcXVhbmRyYW50IHdpdGggdGhlIGJpZ2dlc3QgYXJlYSBpdCBwbGFjZSB0aGUgdG9vbHRpcCBpbiB0aGF0XG4gIGRpcmVjdGlvbi5cblxuICBUbyBmaW5kIHRoZSBhcmVhcyB3ZSBmaXJzdCBnZXQgNSBjb29yZGluYXRlIHBvaW50cy4gVGhlIGNlbnRlciBhbmQgdGhlIG90aGVyIDQgZXh0cmVtZSBwb2ludHNcbiAgd2hpY2ggdG9nZXRoZXIgbWFrZSBhIHBlcmZlY3QgY3Jvc3Mgc2hhcGUuXG5cbiAgT25jZSB3ZSBrbm93IHRoZSBjb29yZGluY2F0ZXMgd2UgY2FuIGdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZXJ0aWNlcyB3aGljaCBmb3JtIGVhY2ggcXVhZHJhbnQuXG4gIFNpbmNlIHRoZXkgYXJlIHNxdWFyZXMgd2Ugb25seSBuZWVkIHR3by5cbiovXG5cbmNvbnN0IGdldFRvb2x0aXBDb29yZGluYXRlID0gKFxuICB4LFxuICB5LFxuICB3aWR0aCxcbiAgaGVpZ2h0LFxuICBTY3JlZW5XaWR0aCxcbiAgU2NyZWVuSGVpZ2h0LFxuICB0b29sdGlwV2lkdGgsXG4gIHRvb2x0aXBIZWlnaHQsXG4gIHdpdGhQb2ludGVyXG4pID0+IHtcbiAgLy8gVGhlIGZvbGxvd2luZyBhcmUgcG9pbnQgY29vcmRpbmF0ZXM6IFt4LCB5XVxuICBjb25zdCBjZW50ZXIgPSBbXG4gICAgeCArIGdldEVsZW1lbnRWaXNpYmxlV2lkdGgod2lkdGgsIHgsIFNjcmVlbldpZHRoKSAvIDIsXG4gICAgeSArIGhlaWdodCAvIDIsXG4gIF07XG4gIGNvbnN0IHBPbmUgPSBbY2VudGVyWzBdLCAwXTtcbiAgY29uc3QgcFR3byA9IFtTY3JlZW5XaWR0aCwgY2VudGVyWzFdXTtcbiAgY29uc3QgcFRocmVlID0gW2NlbnRlclswXSwgU2NyZWVuSGVpZ2h0XTtcbiAgY29uc3QgcEZvdXIgPSBbMCwgY2VudGVyWzFdXTtcblxuICAvLyB2ZXJ0aWNlc1xuICBjb25zdCB2T25lID0gZ2V0UG9pbnREaXN0YW5jZShjZW50ZXIsIHBPbmUpO1xuICBjb25zdCB2VHdvID0gZ2V0UG9pbnREaXN0YW5jZShjZW50ZXIsIHBUd28pO1xuICBjb25zdCB2VGhyZWUgPSBnZXRQb2ludERpc3RhbmNlKGNlbnRlciwgcFRocmVlKTtcbiAgY29uc3QgdkZvdXIgPSBnZXRQb2ludERpc3RhbmNlKGNlbnRlciwgcEZvdXIpO1xuXG4gIC8vIFF1YWRyYW50IGFyZWFzLlxuICAvLyB0eXBlIEFyZWFzID0ge1xuICAvLyAgIGFyZWE6IG51bWJlcixcbiAgLy8gICBpZDogbnVtYmVyLFxuICAvLyB9O1xuXG4gIGNvbnN0IGFyZWFzID0gW1xuICAgIGdldEFyZWEodk9uZSwgdkZvdXIpLFxuICAgIGdldEFyZWEodk9uZSwgdlR3byksXG4gICAgZ2V0QXJlYSh2VHdvLCB2VGhyZWUpLFxuICAgIGdldEFyZWEodlRocmVlLCB2Rm91ciksXG4gIF0ubWFwKChlYWNoLCBpbmRleCkgPT4gKHsgYXJlYTogZWFjaCwgaWQ6IGluZGV4IH0pKTtcblxuICBjb25zdCBzb3J0ZWRBcmVhID0gYXJlYXMuc29ydCgoYSwgYikgPT4gYi5hcmVhIC0gYS5hcmVhKTtcblxuICAvLyBkZXNsb2NhdGVkIHBvaW50c1xuICBjb25zdCBkWCA9IDAuMDAxO1xuICBjb25zdCBkWSA9IGhlaWdodCAvIDI7XG5cbiAgLy8gRGVzbG9jYXRlIHRoZSBjb29yZGluYXRlcyBpbiB0aGUgZGlyZWN0aW9uIG9mIHRoZSBxdWFkcmFudC5cbiAgY29uc3QgZGlyZWN0aW9uQ29ycmVjdGlvbiA9IFtbLTEsIC0xXSwgWzEsIC0xXSwgWzEsIDFdLCBbLTEsIDFdXTtcbiAgY29uc3QgZGVzbG9jYXRlUmVmZXJlbmNlUG9pbnQgPSBbXG4gICAgWy10b29sdGlwV2lkdGgsIC10b29sdGlwSGVpZ2h0XSxcbiAgICBbMCwgLXRvb2x0aXBIZWlnaHRdLFxuICAgIFswLCAwXSxcbiAgICBbLXRvb2x0aXBXaWR0aCwgMF0sXG4gIF07XG5cbiAgLy8gY3VycmVudCBxdWFkcmFudCBpbmRleFxuICBjb25zdCBxSW5kZXggPSBzb3J0ZWRBcmVhWzBdLmlkO1xuXG4gIGNvbnN0IGdldFdpdGhQb2ludGVyT2Zmc2V0WSA9ICgpID0+XG4gICAgd2l0aFBvaW50ZXIgPyAxMCAqIGRpcmVjdGlvbkNvcnJlY3Rpb25bcUluZGV4XVsxXSA6IDA7XG4gIGNvbnN0IGdldFdpdGhQb2ludGVyT2Zmc2V0WCA9ICgpID0+XG4gICAgd2l0aFBvaW50ZXIgPyBjZW50ZXJbMF0gLSAxOCAqIGRpcmVjdGlvbkNvcnJlY3Rpb25bcUluZGV4XVswXSA6IGNlbnRlclswXTtcblxuICBjb25zdCBuZXdYID1cbiAgICBnZXRXaXRoUG9pbnRlck9mZnNldFgoKSArXG4gICAgKGRYICogZGlyZWN0aW9uQ29ycmVjdGlvbltxSW5kZXhdWzBdICsgZGVzbG9jYXRlUmVmZXJlbmNlUG9pbnRbcUluZGV4XVswXSk7XG5cbiAgcmV0dXJuIHtcbiAgICB4OiBjb25zdHJhaW50WChuZXdYLCBxSW5kZXgsIGNlbnRlclswXSwgU2NyZWVuV2lkdGgsIHRvb2x0aXBXaWR0aCksXG4gICAgeTpcbiAgICAgIGNlbnRlclsxXSArXG4gICAgICAoZFkgKiBkaXJlY3Rpb25Db3JyZWN0aW9uW3FJbmRleF1bMV0gK1xuICAgICAgICBkZXNsb2NhdGVSZWZlcmVuY2VQb2ludFtxSW5kZXhdWzFdKSArXG4gICAgICBnZXRXaXRoUG9pbnRlck9mZnNldFkoKSxcbiAgfTtcbn07XG5cbmNvbnN0IGNvbnN0cmFpbnRYID0gKG5ld1gsIHFJbmRleCwgeCwgU2NyZWVuV2lkdGgsIHRvb2x0aXBXaWR0aCkgPT4ge1xuICBzd2l0Y2ggKHFJbmRleCkge1xuICAgIC8vIDAgYW5kIDMgYXJlIHRoZSBsZWZ0IHNpZGUgcXVhZHJhbnRzLlxuICAgIGNhc2UgMDpcbiAgICBjYXNlIDM6IHtcbiAgICAgIGNvbnN0IG1heFdpZHRoID0gbmV3WCA+IFNjcmVlbldpZHRoID8gU2NyZWVuV2lkdGggLSAxMCA6IG5ld1g7XG4gICAgICByZXR1cm4gbmV3WCA8IDEgPyAxMCA6IG1heFdpZHRoO1xuICAgIH1cbiAgICAvLyAxIGFuZCAyIGFyZSB0aGUgcmlnaHQgc2lkZSBxdWFkcmFudHNcbiAgICBjYXNlIDE6XG4gICAgY2FzZSAyOiB7XG4gICAgICBjb25zdCBsZWZ0T3ZlclNwYWNlID0gU2NyZWVuV2lkdGggLSBuZXdYO1xuICAgICAgcmV0dXJuIGxlZnRPdmVyU3BhY2UgPj0gdG9vbHRpcFdpZHRoXG4gICAgICAgID8gbmV3WFxuICAgICAgICA6IG5ld1ggLSAodG9vbHRpcFdpZHRoIC0gbGVmdE92ZXJTcGFjZSArIDEwKTtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBnZXRUb29sdGlwQ29vcmRpbmF0ZTtcbiJdfQ==