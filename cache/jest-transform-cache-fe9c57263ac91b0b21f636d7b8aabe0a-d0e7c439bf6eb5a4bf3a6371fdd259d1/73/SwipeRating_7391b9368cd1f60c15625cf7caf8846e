a92fead6a603d43ba3e67d29f50ecfd4
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _times = _interopRequireDefault(require("lodash/times"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactNative = require("react-native");

var STAR_IMAGE = require('./images/star.png');

var HEART_IMAGE = require('./images/heart.png');

var ROCKET_IMAGE = require('./images/rocket.png');

var BELL_IMAGE = require('./images/bell.png');

var TYPES = {
  star: {
    source: STAR_IMAGE,
    color: '#f1c40f',
    backgroundColor: 'white'
  },
  heart: {
    source: HEART_IMAGE,
    color: '#e74c3c',
    backgroundColor: 'white'
  },
  rocket: {
    source: ROCKET_IMAGE,
    color: '#2ecc71',
    backgroundColor: 'white'
  },
  bell: {
    source: BELL_IMAGE,
    color: '#f39c12',
    backgroundColor: 'white'
  }
};

var SwipeRating = function (_Component) {
  (0, _inherits2.default)(SwipeRating, _Component);

  function SwipeRating(props) {
    var _this;

    (0, _classCallCheck2.default)(this, SwipeRating);
    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(SwipeRating).call(this, props));
    var _this$props = _this.props,
        onStartRating = _this$props.onStartRating,
        onFinishRating = _this$props.onFinishRating,
        fractions = _this$props.fractions;
    var position = new _reactNative.Animated.ValueXY();

    var panResponder = _reactNative.PanResponder.create({
      onStartShouldSetPanResponder: function onStartShouldSetPanResponder() {
        return true;
      },
      onPanResponderGrant: function onPanResponderGrant() {
        if (typeof onStartRating === 'function') {
          onStartRating();
        }
      },
      onPanResponderMove: function onPanResponderMove(event, gesture) {
        var newPosition = new _reactNative.Animated.ValueXY();
        newPosition.setValue({
          x: gesture.dx,
          y: 0
        });

        _this.setState({
          position: newPosition,
          value: gesture.dx
        });
      },
      onPanResponderRelease: function onPanResponderRelease(event) {
        var rating = _this.getCurrentRating(_this.state.value);

        if (rating >= _this.props.minValue) {
          if (!fractions) {
            _this.setCurrentRating(rating);
          }

          onFinishRating(rating);
        }
      }
    });

    _this.state = {
      panResponder: panResponder,
      position: position,
      display: false
    };
    return _this;
  }

  (0, _createClass2.default)(SwipeRating, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _STAR_IMAGE, _HEART_IMAGE, _ROCKET_IMAGE, _BELL_IMAGE;

      return _regenerator.default.async(function componentDidMount$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return _regenerator.default.awrap(require('./images/star.png'));

            case 3:
              _STAR_IMAGE = _context.sent;
              _context.next = 6;
              return _regenerator.default.awrap(require('./images/heart.png'));

            case 6:
              _HEART_IMAGE = _context.sent;
              _context.next = 9;
              return _regenerator.default.awrap(require('./images/rocket.png'));

            case 9:
              _ROCKET_IMAGE = _context.sent;
              _context.next = 12;
              return _regenerator.default.awrap(require('./images/bell.png'));

            case 12:
              _BELL_IMAGE = _context.sent;
              this.setState({
                display: true
              });
              _context.next = 19;
              break;

            case 16:
              _context.prev = 16;
              _context.t0 = _context["catch"](0);
              console.log(_context.t0);

            case 19:
              this.setCurrentRating(this.props.startingValue);

            case 20:
            case "end":
              return _context.stop();
          }
        }
      }, null, this, [[0, 16]]);
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (this.props.startingValue !== prevProps.startingValue) {
        this.setCurrentRating(this.props.startingValue);
      }
    }
  }, {
    key: "getPrimaryViewStyle",
    value: function getPrimaryViewStyle() {
      var position = this.state.position;
      var _this$props2 = this.props,
          imageSize = _this$props2.imageSize,
          ratingCount = _this$props2.ratingCount,
          type = _this$props2.type;
      var color = TYPES[type].color;
      var width = position.x.interpolate({
        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],
        outputRange: [0, ratingCount * imageSize / 2, ratingCount * imageSize],
        extrapolate: 'clamp'
      }, {
        useNativeDriver: true
      });
      return {
        backgroundColor: color,
        width: width,
        height: width ? imageSize : 0
      };
    }
  }, {
    key: "getSecondaryViewStyle",
    value: function getSecondaryViewStyle() {
      var position = this.state.position;
      var _this$props3 = this.props,
          imageSize = _this$props3.imageSize,
          ratingCount = _this$props3.ratingCount,
          type = _this$props3.type;
      var backgroundColor = TYPES[type].backgroundColor;
      var width = position.x.interpolate({
        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],
        outputRange: [ratingCount * imageSize, ratingCount * imageSize / 2, 0],
        extrapolate: 'clamp'
      }, {
        useNativeDriver: true
      });
      return {
        backgroundColor: backgroundColor,
        width: width,
        height: width ? imageSize : 0
      };
    }
  }, {
    key: "renderRatings",
    value: function renderRatings() {
      var _this$props4 = this.props,
          imageSize = _this$props4.imageSize,
          ratingCount = _this$props4.ratingCount,
          type = _this$props4.type,
          tintColor = _this$props4.tintColor;
      var source = TYPES[type].source;
      return (0, _times.default)(ratingCount, function (index) {
        return _react.default.createElement(_reactNative.View, {
          key: index,
          style: styles.starContainer
        }, _react.default.createElement(_reactNative.Image, {
          source: source,
          style: {
            width: imageSize,
            height: imageSize,
            tintColor: tintColor
          }
        }));
      });
    }
  }, {
    key: "getCurrentRating",
    value: function getCurrentRating(value) {
      var _this$props5 = this.props,
          fractions = _this$props5.fractions,
          imageSize = _this$props5.imageSize,
          ratingCount = _this$props5.ratingCount;
      var startingValue = ratingCount / 2;
      var currentRating = this.props.minValue ? this.props.minValue : 0;

      if (value > ratingCount * imageSize / 2) {
        currentRating = ratingCount;
      } else if (value < -ratingCount * imageSize / 2) {
        currentRating = this.props.minValue ? this.props.minValue : 0;
      } else if (value <= imageSize || value > imageSize) {
        currentRating = startingValue + value / imageSize;
        currentRating = !fractions ? Math.ceil(currentRating) : +currentRating.toFixed(fractions);
      } else {
        currentRating = !fractions ? Math.ceil(startingValue) : +startingValue.toFixed(fractions);
      }

      return currentRating;
    }
  }, {
    key: "setCurrentRating",
    value: function setCurrentRating(rating) {
      var _this$props6 = this.props,
          imageSize = _this$props6.imageSize,
          ratingCount = _this$props6.ratingCount;
      var initialRating = ratingCount / 2;
      var value = null;

      if (rating > ratingCount) {
        value = ratingCount * imageSize / 2;
      } else if (rating < 0) {
        value = -ratingCount * imageSize / 2;
      } else if (rating < ratingCount / 2 || rating > ratingCount / 2) {
        value = (rating - initialRating) * imageSize;
      } else {
        value = 0;
      }

      var newPosition = new _reactNative.Animated.ValueXY();
      newPosition.setValue({
        x: value,
        y: 0
      });
      this.setState({
        position: newPosition,
        value: value
      });
    }
  }, {
    key: "displayCurrentRating",
    value: function displayCurrentRating() {
      var _this$props7 = this.props,
          ratingCount = _this$props7.ratingCount,
          type = _this$props7.type,
          readonly = _this$props7.readonly,
          ratingTextColor = _this$props7.ratingTextColor;
      var color = ratingTextColor || TYPES[type].color;
      return _react.default.createElement(_reactNative.View, {
        style: styles.showRatingView
      }, _react.default.createElement(_reactNative.View, {
        style: styles.ratingView
      }, _react.default.createElement(_reactNative.Text, {
        style: [styles.ratingText, {
          color: color
        }]
      }, "Rating:", ' '), _react.default.createElement(_reactNative.Text, {
        style: [styles.currentRatingText, {
          color: color
        }]
      }, this.getCurrentRating(this.state.value)), _react.default.createElement(_reactNative.Text, {
        style: [styles.maxRatingText, {
          color: color
        }]
      }, "/", ratingCount)), _react.default.createElement(_reactNative.View, null, readonly && _react.default.createElement(_reactNative.Text, {
        style: [styles.readonlyLabel, {
          color: color
        }]
      }, "(readonly)")));
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props8 = this.props,
          readonly = _this$props8.readonly,
          type = _this$props8.type,
          ratingImage = _this$props8.ratingImage,
          ratingColor = _this$props8.ratingColor,
          ratingBackgroundColor = _this$props8.ratingBackgroundColor,
          style = _this$props8.style,
          showRating = _this$props8.showRating;

      if (type === 'custom') {
        var custom = {
          source: ratingImage,
          color: ratingColor,
          backgroundColor: ratingBackgroundColor
        };
        TYPES.custom = custom;
      }

      return this.state.display ? _react.default.createElement(_reactNative.View, {
        pointerEvents: readonly ? 'none' : 'auto',
        style: style
      }, showRating && this.displayCurrentRating(), _react.default.createElement(_reactNative.View, (0, _extends2.default)({
        style: styles.starsWrapper
      }, this.state.panResponder.panHandlers), _react.default.createElement(_reactNative.View, {
        style: styles.starsInsideWrapper
      }, _react.default.createElement(_reactNative.Animated.View, {
        style: this.getPrimaryViewStyle()
      }), _react.default.createElement(_reactNative.Animated.View, {
        style: this.getSecondaryViewStyle()
      })), this.renderRatings())) : null;
    }
  }]);
  return SwipeRating;
}(_react.Component);

exports.default = SwipeRating;
SwipeRating.defaultProps = {
  type: 'star',
  ratingImage: require('./images/star.png'),
  ratingColor: '#f1c40f',
  ratingBackgroundColor: 'white',
  ratingCount: 5,
  imageSize: 40,
  onFinishRating: function onFinishRating() {
    return console.log('Attach a onFinishRating function here.');
  },
  minValue: 0
};

var styles = _reactNative.StyleSheet.create({
  starsWrapper: {
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center'
  },
  starsInsideWrapper: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center'
  },
  showRatingView: {
    flexDirection: 'column',
    justifyContent: 'center',
    alignItems: 'center',
    paddingBottom: 5
  },
  ratingView: {
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center',
    paddingBottom: 5
  },
  ratingText: {
    fontSize: 15,
    textAlign: 'center',
    fontFamily: _reactNative.Platform.OS === 'ios' ? 'Trebuchet MS' : null,
    color: '#34495e'
  },
  readonlyLabel: {
    justifyContent: 'center',
    alignItems: 'center',
    fontSize: 12,
    textAlign: 'center',
    fontFamily: _reactNative.Platform.OS === 'ios' ? 'Trebuchet MS' : null,
    color: '#34495a'
  },
  currentRatingText: {
    fontSize: 30,
    textAlign: 'center',
    fontFamily: _reactNative.Platform.OS === 'ios' ? 'Trebuchet MS' : null
  },
  maxRatingText: {
    fontSize: 18,
    textAlign: 'center',
    fontFamily: _reactNative.Platform.OS === 'ios' ? 'Trebuchet MS' : null,
    color: '#34495e'
  }
});

var fractionsType = function fractionsType(props, propName, componentName) {
  if (props[propName]) {
    var value = props[propName];

    if (typeof value === 'number') {
      return value >= 0 && value <= 20 ? null : new Error("`" + propName + "` in `" + componentName + "` must be between 0 and 20");
    }

    return new Error("`" + propName + "` in `" + componentName + "` must be a number");
  }
};

SwipeRating.propTypes = {
  type: _propTypes.default.string,
  ratingImage: _reactNative.Image.propTypes.source,
  ratingColor: _propTypes.default.string,
  ratingBackgroundColor: _propTypes.default.string,
  ratingCount: _propTypes.default.number,
  ratingTextColor: _propTypes.default.string,
  imageSize: _propTypes.default.number,
  onStartRating: _propTypes.default.func,
  onFinishRating: _propTypes.default.func,
  showRating: _propTypes.default.bool,
  style: _reactNative.ViewPropTypes.style,
  readonly: _propTypes.default.bool,
  startingValue: _propTypes.default.number,
  fractions: fractionsType,
  minValue: _propTypes.default.number
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN3aXBlUmF0aW5nLmpzIl0sIm5hbWVzIjpbIlNUQVJfSU1BR0UiLCJyZXF1aXJlIiwiSEVBUlRfSU1BR0UiLCJST0NLRVRfSU1BR0UiLCJCRUxMX0lNQUdFIiwiVFlQRVMiLCJzdGFyIiwic291cmNlIiwiY29sb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJoZWFydCIsInJvY2tldCIsImJlbGwiLCJTd2lwZVJhdGluZyIsInByb3BzIiwib25TdGFydFJhdGluZyIsIm9uRmluaXNoUmF0aW5nIiwiZnJhY3Rpb25zIiwicG9zaXRpb24iLCJBbmltYXRlZCIsIlZhbHVlWFkiLCJwYW5SZXNwb25kZXIiLCJQYW5SZXNwb25kZXIiLCJjcmVhdGUiLCJvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyIiwib25QYW5SZXNwb25kZXJHcmFudCIsIm9uUGFuUmVzcG9uZGVyTW92ZSIsImV2ZW50IiwiZ2VzdHVyZSIsIm5ld1Bvc2l0aW9uIiwic2V0VmFsdWUiLCJ4IiwiZHgiLCJ5Iiwic2V0U3RhdGUiLCJ2YWx1ZSIsIm9uUGFuUmVzcG9uZGVyUmVsZWFzZSIsInJhdGluZyIsImdldEN1cnJlbnRSYXRpbmciLCJzdGF0ZSIsIm1pblZhbHVlIiwic2V0Q3VycmVudFJhdGluZyIsImRpc3BsYXkiLCJjb25zb2xlIiwibG9nIiwic3RhcnRpbmdWYWx1ZSIsInByZXZQcm9wcyIsImltYWdlU2l6ZSIsInJhdGluZ0NvdW50IiwidHlwZSIsIndpZHRoIiwiaW50ZXJwb2xhdGUiLCJpbnB1dFJhbmdlIiwib3V0cHV0UmFuZ2UiLCJleHRyYXBvbGF0ZSIsInVzZU5hdGl2ZURyaXZlciIsImhlaWdodCIsInRpbnRDb2xvciIsImluZGV4Iiwic3R5bGVzIiwic3RhckNvbnRhaW5lciIsImN1cnJlbnRSYXRpbmciLCJNYXRoIiwiY2VpbCIsInRvRml4ZWQiLCJpbml0aWFsUmF0aW5nIiwicmVhZG9ubHkiLCJyYXRpbmdUZXh0Q29sb3IiLCJzaG93UmF0aW5nVmlldyIsInJhdGluZ1ZpZXciLCJyYXRpbmdUZXh0IiwiY3VycmVudFJhdGluZ1RleHQiLCJtYXhSYXRpbmdUZXh0IiwicmVhZG9ubHlMYWJlbCIsInJhdGluZ0ltYWdlIiwicmF0aW5nQ29sb3IiLCJyYXRpbmdCYWNrZ3JvdW5kQ29sb3IiLCJzdHlsZSIsInNob3dSYXRpbmciLCJjdXN0b20iLCJkaXNwbGF5Q3VycmVudFJhdGluZyIsInN0YXJzV3JhcHBlciIsInBhbkhhbmRsZXJzIiwic3RhcnNJbnNpZGVXcmFwcGVyIiwiZ2V0UHJpbWFyeVZpZXdTdHlsZSIsImdldFNlY29uZGFyeVZpZXdTdHlsZSIsInJlbmRlclJhdGluZ3MiLCJDb21wb25lbnQiLCJkZWZhdWx0UHJvcHMiLCJTdHlsZVNoZWV0IiwiZmxleERpcmVjdGlvbiIsImp1c3RpZnlDb250ZW50IiwiYWxpZ25JdGVtcyIsInRvcCIsImxlZnQiLCJyaWdodCIsImJvdHRvbSIsInBhZGRpbmdCb3R0b20iLCJmb250U2l6ZSIsInRleHRBbGlnbiIsImZvbnRGYW1pbHkiLCJQbGF0Zm9ybSIsIk9TIiwiZnJhY3Rpb25zVHlwZSIsInByb3BOYW1lIiwiY29tcG9uZW50TmFtZSIsIkVycm9yIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwic3RyaW5nIiwiSW1hZ2UiLCJudW1iZXIiLCJmdW5jIiwiYm9vbCIsIlZpZXdQcm9wVHlwZXMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBRUE7O0FBTUEsSUFBTUEsVUFBVSxHQUFHQyxPQUFPLENBQUMsbUJBQUQsQ0FBMUI7O0FBQ0EsSUFBTUMsV0FBVyxHQUFHRCxPQUFPLENBQUMsb0JBQUQsQ0FBM0I7O0FBQ0EsSUFBTUUsWUFBWSxHQUFHRixPQUFPLENBQUMscUJBQUQsQ0FBNUI7O0FBQ0EsSUFBTUcsVUFBVSxHQUFHSCxPQUFPLENBQUMsbUJBQUQsQ0FBMUI7O0FBRUEsSUFBTUksS0FBSyxHQUFHO0FBQ1pDLEVBQUFBLElBQUksRUFBRTtBQUNKQyxJQUFBQSxNQUFN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QyxNQUhEO0FBSXRCakMsRUFBQUEscUJBQXFCLEVBQUVnQyxtQkFBVUMsTUFKWDtBQUt0QjdELEVBQUFBLFdBQVcsRUFBRTRELG1CQUFVRyxNQUxEO0FBTXRCNUMsRUFBQUEsZUFBZSxFQUFFeUMsbUJBQVVDLE1BTkw7QUFPdEI5RCxFQUFBQSxTQUFTLEVBQUU2RCxtQkFBVUcsTUFQQztBQVF0QmhHLEVBQUFBLGFBQWEsRUFBRTZGLG1CQUFVSSxJQVJIO0FBU3RCaEcsRUFBQUEsY0FBYyxFQUFFNEYsbUJBQVVJLElBVEo7QUFVdEJsQyxFQUFBQSxVQUFVLEVBQUU4QixtQkFBVUssSUFWQTtBQVd0QnBDLEVBQUFBLEtBQUssRUFBRXFDLDJCQUFjckMsS0FYQztBQVl0QlgsRUFBQUEsUUFBUSxFQUFFMEMsbUJBQVVLLElBWkU7QUFhdEJwRSxFQUFBQSxhQUFhLEVBQUUrRCxtQkFBVUcsTUFiSDtBQWN0QjlGLEVBQUFBLFNBQVMsRUFBRXNGLGFBZFc7QUFldEIvRCxFQUFBQSxRQUFRLEVBQUVvRSxtQkFBVUc7QUFmRSxDQUF4QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0aW1lcyBmcm9tICdsb2Rhc2gvdGltZXMnO1xuXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcblxuaW1wb3J0IHsgXG4gIFZpZXcsIFRleHQsIEFuaW1hdGVkLCBQYW5SZXNwb25kZXIsIEltYWdlLCBcbiAgU3R5bGVTaGVldCwgUGxhdGZvcm0sIFZpZXdQcm9wVHlwZXNcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcblxuLy8gUkFUSU5HIElNQUdFUyBXSVRIIFNUQVRJQyBCQUNLR1JPVU5EIENPTE9SICh3aGl0ZSlcbmNvbnN0IFNUQVJfSU1BR0UgPSByZXF1aXJlKCcuL2ltYWdlcy9zdGFyLnBuZycpO1xuY29uc3QgSEVBUlRfSU1BR0UgPSByZXF1aXJlKCcuL2ltYWdlcy9oZWFydC5wbmcnKTtcbmNvbnN0IFJPQ0tFVF9JTUFHRSA9IHJlcXVpcmUoJy4vaW1hZ2VzL3JvY2tldC5wbmcnKTtcbmNvbnN0IEJFTExfSU1BR0UgPSByZXF1aXJlKCcuL2ltYWdlcy9iZWxsLnBuZycpO1xuXG5jb25zdCBUWVBFUyA9IHtcbiAgc3Rhcjoge1xuICAgIHNvdXJjZTogU1RBUl9JTUFHRSxcbiAgICBjb2xvcjogJyNmMWM0MGYnLFxuICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJ1xuICB9LFxuICBoZWFydDoge1xuICAgIHNvdXJjZTogSEVBUlRfSU1BR0UsXG4gICAgY29sb3I6ICcjZTc0YzNjJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZSdcbiAgfSxcbiAgcm9ja2V0OiB7XG4gICAgc291cmNlOiBST0NLRVRfSU1BR0UsXG4gICAgY29sb3I6ICcjMmVjYzcxJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZSdcbiAgfSxcbiAgYmVsbDoge1xuICAgIHNvdXJjZTogQkVMTF9JTUFHRSxcbiAgICBjb2xvcjogJyNmMzljMTInLFxuICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJ1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTd2lwZVJhdGluZyBleHRlbmRzIENvbXBvbmVudCB7XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgdHlwZTogJ3N0YXInLFxuICAgIHJhdGluZ0ltYWdlOiByZXF1aXJlKCcuL2ltYWdlcy9zdGFyLnBuZycpLFxuICAgIHJhdGluZ0NvbG9yOiAnI2YxYzQwZicsXG4gICAgcmF0aW5nQmFja2dyb3VuZENvbG9yOiAnd2hpdGUnLFxuICAgIHJhdGluZ0NvdW50OiA1LFxuICAgIGltYWdlU2l6ZTogNDAsXG4gICAgb25GaW5pc2hSYXRpbmc6ICgpID0+IGNvbnNvbGUubG9nKCdBdHRhY2ggYSBvbkZpbmlzaFJhdGluZyBmdW5jdGlvbiBoZXJlLicpLFxuICAgIG1pblZhbHVlOiAwXG4gIH07XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgY29uc3QgeyBvblN0YXJ0UmF0aW5nLCBvbkZpbmlzaFJhdGluZywgZnJhY3Rpb25zIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IEFuaW1hdGVkLlZhbHVlWFkoKTtcblxuICAgIGNvbnN0IHBhblJlc3BvbmRlciA9IFBhblJlc3BvbmRlci5jcmVhdGUoe1xuICAgICAgb25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlcjogKCkgPT4gdHJ1ZSxcbiAgICAgIG9uUGFuUmVzcG9uZGVyR3JhbnQ6ICgpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBvblN0YXJ0UmF0aW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgb25TdGFydFJhdGluZygpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25QYW5SZXNwb25kZXJNb3ZlOiAoZXZlbnQsIGdlc3R1cmUpID0+IHtcbiAgICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSBuZXcgQW5pbWF0ZWQuVmFsdWVYWSgpO1xuICAgICAgICBuZXdQb3NpdGlvbi5zZXRWYWx1ZSh7IHg6IGdlc3R1cmUuZHgsIHk6IDAgfSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBwb3NpdGlvbjogbmV3UG9zaXRpb24sIHZhbHVlOiBnZXN0dXJlLmR4IH0pO1xuICAgICAgfSxcbiAgICAgIG9uUGFuUmVzcG9uZGVyUmVsZWFzZTogZXZlbnQgPT4ge1xuICAgICAgICBjb25zdCByYXRpbmcgPSB0aGlzLmdldEN1cnJlbnRSYXRpbmcodGhpcy5zdGF0ZS52YWx1ZSk7XG4gICAgICAgIGlmIChyYXRpbmcgPj0gdGhpcy5wcm9wcy5taW5WYWx1ZSkge1xuICAgICAgICAgIGlmICghZnJhY3Rpb25zKSB7XG4gICAgICAgICAgICAvLyAncm91bmQgdXAnIHRvIHRoZSBuZWFyZXN0IHJhdGluZyBpbWFnZVxuICAgICAgICAgICAgdGhpcy5zZXRDdXJyZW50UmF0aW5nKHJhdGluZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9uRmluaXNoUmF0aW5nKHJhdGluZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuc3RhdGUgPSB7IHBhblJlc3BvbmRlciwgcG9zaXRpb24sIGRpc3BsYXk6IGZhbHNlIH07XG4gIH1cblxuICBhc3luYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgU1RBUl9JTUFHRSA9IGF3YWl0IHJlcXVpcmUoJy4vaW1hZ2VzL3N0YXIucG5nJyk7XG4gICAgICBjb25zdCBIRUFSVF9JTUFHRSA9IGF3YWl0IHJlcXVpcmUoJy4vaW1hZ2VzL2hlYXJ0LnBuZycpO1xuICAgICAgY29uc3QgUk9DS0VUX0lNQUdFID0gYXdhaXQgcmVxdWlyZSgnLi9pbWFnZXMvcm9ja2V0LnBuZycpO1xuICAgICAgY29uc3QgQkVMTF9JTUFHRSA9IGF3YWl0IHJlcXVpcmUoJy4vaW1hZ2VzL2JlbGwucG5nJyk7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBkaXNwbGF5OiB0cnVlIH0pXG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICB9XG5cbiAgICB0aGlzLnNldEN1cnJlbnRSYXRpbmcodGhpcy5wcm9wcy5zdGFydGluZ1ZhbHVlKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5zdGFydGluZ1ZhbHVlICE9PSBwcmV2UHJvcHMuc3RhcnRpbmdWYWx1ZSkge1xuICAgICAgdGhpcy5zZXRDdXJyZW50UmF0aW5nKHRoaXMucHJvcHMuc3RhcnRpbmdWYWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0UHJpbWFyeVZpZXdTdHlsZSgpIHtcbiAgICBjb25zdCB7IHBvc2l0aW9uIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgaW1hZ2VTaXplLCByYXRpbmdDb3VudCwgdHlwZSB9ID0gdGhpcy5wcm9wcztcblxuICAgIGNvbnN0IGNvbG9yID0gVFlQRVNbdHlwZV0uY29sb3I7XG5cbiAgICBjb25zdCB3aWR0aCA9IHBvc2l0aW9uLnguaW50ZXJwb2xhdGUoXG4gICAgICB7XG4gICAgICAgIGlucHV0UmFuZ2U6IFstcmF0aW5nQ291bnQgKiAoaW1hZ2VTaXplIC8gMiksIDAsIHJhdGluZ0NvdW50ICogKGltYWdlU2l6ZSAvIDIpXSxcbiAgICAgICAgb3V0cHV0UmFuZ2U6IFswLCAocmF0aW5nQ291bnQgKiBpbWFnZVNpemUpIC8gMiwgcmF0aW5nQ291bnQgKiBpbWFnZVNpemVdLFxuICAgICAgICBleHRyYXBvbGF0ZTogJ2NsYW1wJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdXNlTmF0aXZlRHJpdmVyOiB0cnVlXG4gICAgICB9XG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yLFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQ6IHdpZHRoID8gaW1hZ2VTaXplIDogMFxuICAgIH07XG4gIH1cblxuICBnZXRTZWNvbmRhcnlWaWV3U3R5bGUoKSB7XG4gICAgY29uc3QgeyBwb3NpdGlvbiB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IGltYWdlU2l6ZSwgcmF0aW5nQ291bnQsIHR5cGUgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCBiYWNrZ3JvdW5kQ29sb3IgPSBUWVBFU1t0eXBlXS5iYWNrZ3JvdW5kQ29sb3I7XG5cbiAgICBjb25zdCB3aWR0aCA9IHBvc2l0aW9uLnguaW50ZXJwb2xhdGUoXG4gICAgICB7XG4gICAgICAgIGlucHV0UmFuZ2U6IFstcmF0aW5nQ291bnQgKiAoaW1hZ2VTaXplIC8gMiksIDAsIHJhdGluZ0NvdW50ICogKGltYWdlU2l6ZSAvIDIpXSxcbiAgICAgICAgb3V0cHV0UmFuZ2U6IFtyYXRpbmdDb3VudCAqIGltYWdlU2l6ZSwgKHJhdGluZ0NvdW50ICogaW1hZ2VTaXplKSAvIDIsIDBdLFxuICAgICAgICBleHRyYXBvbGF0ZTogJ2NsYW1wJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdXNlTmF0aXZlRHJpdmVyOiB0cnVlXG4gICAgICB9XG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3IsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodDogd2lkdGggPyBpbWFnZVNpemUgOiAwXG4gICAgfTtcbiAgfVxuXG4gIHJlbmRlclJhdGluZ3MoKSB7XG4gICAgY29uc3QgeyBpbWFnZVNpemUsIHJhdGluZ0NvdW50LCB0eXBlLCB0aW50Q29sb3IgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qgc291cmNlID0gVFlQRVNbdHlwZV0uc291cmNlO1xuXG4gICAgcmV0dXJuIHRpbWVzKHJhdGluZ0NvdW50LCBpbmRleCA9PiAoXG4gICAgICA8VmlldyBrZXk9e2luZGV4fSBzdHlsZT17c3R5bGVzLnN0YXJDb250YWluZXJ9PlxuICAgICAgICA8SW1hZ2Ugc291cmNlPXtzb3VyY2V9IHN0eWxlPXt7IHdpZHRoOiBpbWFnZVNpemUsIGhlaWdodDogaW1hZ2VTaXplLCB0aW50Q29sb3IgfX0gLz5cbiAgICAgIDwvVmlldz5cbiAgICApKTtcbiAgfVxuXG4gIGdldEN1cnJlbnRSYXRpbmcodmFsdWUpIHtcbiAgICAvLyBjb25zdCB7IHZhbHVlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgZnJhY3Rpb25zLCBpbWFnZVNpemUsIHJhdGluZ0NvdW50IH0gPSB0aGlzLnByb3BzO1xuXG4gICAgY29uc3Qgc3RhcnRpbmdWYWx1ZSA9IHJhdGluZ0NvdW50IC8gMjtcbiAgICBsZXQgY3VycmVudFJhdGluZyA9ICh0aGlzLnByb3BzLm1pblZhbHVlKSA/IHRoaXMucHJvcHMubWluVmFsdWUgOiAwO1xuXG4gICAgaWYgKHZhbHVlID4gKHJhdGluZ0NvdW50ICogaW1hZ2VTaXplKSAvIDIpIHtcbiAgICAgIGN1cnJlbnRSYXRpbmcgPSByYXRpbmdDb3VudDtcbiAgICB9IGVsc2UgaWYgKHZhbHVlIDwgKC1yYXRpbmdDb3VudCAqIGltYWdlU2l6ZSkgLyAyKSB7XG4gICAgICBjdXJyZW50UmF0aW5nID0gKHRoaXMucHJvcHMubWluVmFsdWUpID8gdGhpcy5wcm9wcy5taW5WYWx1ZSA6IDA7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSA8PSBpbWFnZVNpemUgfHwgdmFsdWUgPiBpbWFnZVNpemUpIHtcbiAgICAgIGN1cnJlbnRSYXRpbmcgPSBzdGFydGluZ1ZhbHVlICsgdmFsdWUgLyBpbWFnZVNpemU7XG4gICAgICBjdXJyZW50UmF0aW5nID0gIWZyYWN0aW9ucyA/IE1hdGguY2VpbChjdXJyZW50UmF0aW5nKSA6ICtjdXJyZW50UmF0aW5nLnRvRml4ZWQoZnJhY3Rpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFJhdGluZyA9ICFmcmFjdGlvbnMgPyBNYXRoLmNlaWwoc3RhcnRpbmdWYWx1ZSkgOiArc3RhcnRpbmdWYWx1ZS50b0ZpeGVkKGZyYWN0aW9ucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1cnJlbnRSYXRpbmc7XG4gIH1cblxuICBzZXRDdXJyZW50UmF0aW5nKHJhdGluZykge1xuICAgIGNvbnN0IHsgaW1hZ2VTaXplLCByYXRpbmdDb3VudCB9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIGBpbml0aWFsUmF0aW5nYCBjb3JyZXNwb25kcyB0byBgc3RhcnRpbmdWYWx1ZWAgaW4gdGhlIGdldHRlci4gTmFtaW5nIGl0XG4gICAgLy8gZGlmZmVyZW50bHkgaGVyZSBhdm9pZHMgY29uZnVzaW9uIHdpdGggYHZhbHVlYCBiZWxvdy5cbiAgICBjb25zdCBpbml0aWFsUmF0aW5nID0gcmF0aW5nQ291bnQgLyAyO1xuICAgIGxldCB2YWx1ZSA9IG51bGw7XG5cbiAgICBpZiAocmF0aW5nID4gcmF0aW5nQ291bnQpIHtcbiAgICAgIHZhbHVlID0gKHJhdGluZ0NvdW50ICogaW1hZ2VTaXplKSAvIDI7XG4gICAgfSBlbHNlIGlmIChyYXRpbmcgPCAwKSB7XG4gICAgICB2YWx1ZSA9ICgtcmF0aW5nQ291bnQgKiBpbWFnZVNpemUpIC8gMjtcbiAgICB9IGVsc2UgaWYgKHJhdGluZyA8IHJhdGluZ0NvdW50IC8gMiB8fCByYXRpbmcgPiByYXRpbmdDb3VudCAvIDIpIHtcbiAgICAgIHZhbHVlID0gKHJhdGluZyAtIGluaXRpYWxSYXRpbmcpICogaW1hZ2VTaXplO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IDA7XG4gICAgfVxuXG4gICAgY29uc3QgbmV3UG9zaXRpb24gPSBuZXcgQW5pbWF0ZWQuVmFsdWVYWSgpO1xuICAgIG5ld1Bvc2l0aW9uLnNldFZhbHVlKHsgeDogdmFsdWUsIHk6IDAgfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHBvc2l0aW9uOiBuZXdQb3NpdGlvbiwgdmFsdWUgfSk7XG4gIH1cblxuICBkaXNwbGF5Q3VycmVudFJhdGluZygpIHtcbiAgICBjb25zdCB7IHJhdGluZ0NvdW50LCB0eXBlLCByZWFkb25seSwgcmF0aW5nVGV4dENvbG9yIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGNvbG9yID0gcmF0aW5nVGV4dENvbG9yIHx8IFRZUEVTW3R5cGVdLmNvbG9yO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuc2hvd1JhdGluZ1ZpZXd9PlxuICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLnJhdGluZ1ZpZXd9PlxuICAgICAgICAgIDxUZXh0IHN0eWxlPXtbc3R5bGVzLnJhdGluZ1RleHQsIHsgY29sb3IgfV19PlJhdGluZzp7JyAnfTwvVGV4dD5cbiAgICAgICAgICA8VGV4dCBzdHlsZT17W3N0eWxlcy5jdXJyZW50UmF0aW5nVGV4dCwgeyBjb2xvciB9XX0+e3RoaXMuZ2V0Q3VycmVudFJhdGluZyh0aGlzLnN0YXRlLnZhbHVlKX08L1RleHQ+XG4gICAgICAgICAgPFRleHQgc3R5bGU9e1tzdHlsZXMubWF4UmF0aW5nVGV4dCwgeyBjb2xvciB9XX0+L3tyYXRpbmdDb3VudH08L1RleHQ+XG4gICAgICAgIDwvVmlldz5cbiAgICAgICAgPFZpZXc+e3JlYWRvbmx5ICYmIDxUZXh0IHN0eWxlPXtbc3R5bGVzLnJlYWRvbmx5TGFiZWwsIHsgY29sb3IgfV19PihyZWFkb25seSk8L1RleHQ+fTwvVmlldz5cbiAgICAgIDwvVmlldz5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgcmVhZG9ubHksIHR5cGUsIHJhdGluZ0ltYWdlLCByYXRpbmdDb2xvciwgcmF0aW5nQmFja2dyb3VuZENvbG9yLCBzdHlsZSwgc2hvd1JhdGluZyB9ID0gdGhpcy5wcm9wcztcblxuICAgIGlmICh0eXBlID09PSAnY3VzdG9tJykge1xuICAgICAgbGV0IGN1c3RvbSA9IHtcbiAgICAgICAgc291cmNlOiByYXRpbmdJbWFnZSxcbiAgICAgICAgY29sb3I6IHJhdGluZ0NvbG9yLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHJhdGluZ0JhY2tncm91bmRDb2xvclxuICAgICAgfTtcbiAgICAgIFRZUEVTLmN1c3RvbSA9IGN1c3RvbTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5zdGF0ZS5kaXNwbGF5ID9cbiAgICAgIDxWaWV3IHBvaW50ZXJFdmVudHM9e3JlYWRvbmx5ID8gJ25vbmUnIDogJ2F1dG8nfSBzdHlsZT17c3R5bGV9PlxuICAgICAgICB7c2hvd1JhdGluZyAmJiB0aGlzLmRpc3BsYXlDdXJyZW50UmF0aW5nKCl9XG4gICAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuc3RhcnNXcmFwcGVyfSB7Li4udGhpcy5zdGF0ZS5wYW5SZXNwb25kZXIucGFuSGFuZGxlcnN9PlxuICAgICAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuc3RhcnNJbnNpZGVXcmFwcGVyfT5cbiAgICAgICAgICAgIDxBbmltYXRlZC5WaWV3IHN0eWxlPXt0aGlzLmdldFByaW1hcnlWaWV3U3R5bGUoKX0gLz5cbiAgICAgICAgICAgIDxBbmltYXRlZC5WaWV3IHN0eWxlPXt0aGlzLmdldFNlY29uZGFyeVZpZXdTdHlsZSgpfSAvPlxuICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgICB7dGhpcy5yZW5kZXJSYXRpbmdzKCl9XG4gICAgICAgIDwvVmlldz5cbiAgICAgIDwvVmlldz4gOlxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBzdGFyc1dyYXBwZXI6IHtcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIH0sXG4gIHN0YXJzSW5zaWRlV3JhcHBlcjoge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogMCxcbiAgICBsZWZ0OiAwLFxuICAgIHJpZ2h0OiAwLFxuICAgIGJvdHRvbTogMCxcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIH0sXG4gIHNob3dSYXRpbmdWaWV3OiB7XG4gICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgIHBhZGRpbmdCb3R0b206IDVcbiAgfSxcbiAgcmF0aW5nVmlldzoge1xuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBwYWRkaW5nQm90dG9tOiA1XG4gIH0sXG4gIHJhdGluZ1RleHQ6IHtcbiAgICBmb250U2l6ZTogMTUsXG4gICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICBmb250RmFtaWx5OiBQbGF0Zm9ybS5PUyA9PT0gJ2lvcycgPyAnVHJlYnVjaGV0IE1TJyA6IG51bGwsXG4gICAgY29sb3I6ICcjMzQ0OTVlJ1xuICB9LFxuICByZWFkb25seUxhYmVsOiB7XG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgIGZvbnRTaXplOiAxMixcbiAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgIGZvbnRGYW1pbHk6IFBsYXRmb3JtLk9TID09PSAnaW9zJyA/ICdUcmVidWNoZXQgTVMnIDogbnVsbCxcbiAgICBjb2xvcjogJyMzNDQ5NWEnXG4gIH0sXG4gIGN1cnJlbnRSYXRpbmdUZXh0OiB7XG4gICAgZm9udFNpemU6IDMwLFxuICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgZm9udEZhbWlseTogUGxhdGZvcm0uT1MgPT09ICdpb3MnID8gJ1RyZWJ1Y2hldCBNUycgOiBudWxsXG4gIH0sXG4gIG1heFJhdGluZ1RleHQ6IHtcbiAgICBmb250U2l6ZTogMTgsXG4gICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICBmb250RmFtaWx5OiBQbGF0Zm9ybS5PUyA9PT0gJ2lvcycgPyAnVHJlYnVjaGV0IE1TJyA6IG51bGwsXG4gICAgY29sb3I6ICcjMzQ0OTVlJ1xuICB9XG59KTtcblxuY29uc3QgZnJhY3Rpb25zVHlwZSA9IChwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUpID0+IHtcbiAgaWYgKHByb3BzW3Byb3BOYW1lXSkge1xuICAgIGNvbnN0IHZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSAyMFxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBuZXcgRXJyb3IoYFxcYCR7cHJvcE5hbWV9XFxgIGluIFxcYCR7Y29tcG9uZW50TmFtZX1cXGAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDIwYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBFcnJvcihgXFxgJHtwcm9wTmFtZX1cXGAgaW4gXFxgJHtjb21wb25lbnROYW1lfVxcYCBtdXN0IGJlIGEgbnVtYmVyYCk7XG4gIH1cbn07XG5cblN3aXBlUmF0aW5nLnByb3BUeXBlcyA9IHtcbiAgdHlwZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgcmF0aW5nSW1hZ2U6IEltYWdlLnByb3BUeXBlcy5zb3VyY2UsXG4gIHJhdGluZ0NvbG9yOiBQcm9wVHlwZXMuc3RyaW5nLFxuICByYXRpbmdCYWNrZ3JvdW5kQ29sb3I6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHJhdGluZ0NvdW50OiBQcm9wVHlwZXMubnVtYmVyLFxuICByYXRpbmdUZXh0Q29sb3I6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGltYWdlU2l6ZTogUHJvcFR5cGVzLm51bWJlcixcbiAgb25TdGFydFJhdGluZzogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uRmluaXNoUmF0aW5nOiBQcm9wVHlwZXMuZnVuYyxcbiAgc2hvd1JhdGluZzogUHJvcFR5cGVzLmJvb2wsXG4gIHN0eWxlOiBWaWV3UHJvcFR5cGVzLnN0eWxlLFxuICByZWFkb25seTogUHJvcFR5cGVzLmJvb2wsXG4gIHN0YXJ0aW5nVmFsdWU6IFByb3BUeXBlcy5udW1iZXIsXG4gIGZyYWN0aW9uczogZnJhY3Rpb25zVHlwZSxcbiAgbWluVmFsdWU6IFByb3BUeXBlcy5udW1iZXJcbn07XG4iXX0=